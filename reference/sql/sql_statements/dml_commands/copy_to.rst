.. _copy_to:

**********************
COPY TO
**********************
The **COPY TO** page includes the following sections:

.. contents:: 
   :local:
   :depth: 1

Overview
==========
``COPY ... TO`` is a statement that can be used to export data from a SQream database table or query to a file on the filesystem.

In general, ``COPY`` moves data between filesystem files and SQream DB tables.

.. note:: To copy data from a file to a table, see :ref:`COPY FROM<copy_from>`.

Syntax
==========
The following is the correct syntax for using the **COPY TO** statement:

.. code-block:: postgres

   COPY { [schema_name].table_name [ ( column_name [, ... ] ) ] | query } 
     TO [FOREIGN DATA] WRAPPER fdw_name
      
       OPTIONS
       (
          [ copy_to_option [, ...] ]
       )
       ;
       
   fdw_name ::= csw_fdw | parquet_fdw | orc_fdw
   
   schema_name ::= identifer
  
   table_name ::= identifier

   copy_to_option ::= 

      LOCATION = { filename | S3 URI | HDFS URI }   
      
      | DELIMITER = '{ delimiter }'
      
      | RECORD_DELIMITER = '{ record delimiter }'
      
      | HEADER = { true | false }
      
      | AWS_ID = '{ AWS ID }'
      
      | AWS_SECRET = '{ AWS Secret }'
	  
      | MAX_FILE_SIZE = '{ size_in_bytes }'
	  
      | ENFORCE_SINGLE_FILE = { true | false }


  delimiter ::= string

  record delimiter ::= string

  AWS ID ::= string

  AWS Secret ::= string

.. note:: The DELIMITER is applicable to the CSV format only.
  
.. note:: In Studio, you must write the parameters using lower case letters. Using upper case letters generates an error.

Elements
============
The following table shows the ``COPY_TO`` elements:

.. list-table:: 
   :widths: auto
   :header-rows: 1
   
   * - Parameter
     - Description
   * - ``[schema_name].table_name``
     - Name of the table to be exported
   * - ``query``
     - An SQL query that returns a table result, or a table name
   * - ``fdw_name``
     - The name of the Foreign Data Wrapper to use. Supported FDWs are ``csv_fdw``, ``orc_fdw``, or ``parquet_fdw``.
   * - ``LOCATION``
     - A path on the local filesystem, S3, or HDFS URI. For example, ``/tmp/foo.csv``, ``s3://my-bucket/foo.csv``, or ``hdfs://my-namenode:8020/foo.csv``. The local path must be an absolute path that SQream DB can access.
   * - ``HEADER``
     - The CSV file will contain a header line with the names of each column in the file. This option is allowed only when using CSV format.
   * - ``DELIMITER``
     - Specifies the character that separates fields (columns) within each row of the file. The default is a comma character (``,``).
   * - ``AWS_ID``, ``AWS_SECRET``
     - Specifies the authentication details for secured S3 buckets
   * - ``MAX_FILE_SIZE``
     - Sets the maximum file size (bytes). Default value: 16*2^20 (16MB).
   * - ``ENFORCE_SINGLE_FILE``
     - Enforces the maximum file size (bytes). Permitted values: ``true`` - creates one file of unlimited size, ``false`` - permits creating several files together limited by the ``MAX_FILE_SIZE``. When set to ``true``, the single file size is not limited by the ``MAX_FILE_SIZE`` setting. When set to ``false``, the combined file sizes cannot exceed the ``MAX_FILE_SIZE``. Default value: ``FALSE``.

Usage Notes
===============
The **Usage Notes** describes the following:

.. contents:: 
   :local:
   :depth: 1

Supported Field Delimiters
------------------------------

Printable ASCII Characters
^^^^^^^^^^^^^^^^^^^^^
Any printable ASCII character can be used as a delimiter without special syntax. The default CSV field delimiter is a comma (``,``).

The following table shows the supported printable ASCII characters:

+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| **ASCII** | **Hex** | **Octal** | **Binary** | **HTML Code** | **HTML Name** | **Character** | **Description**      |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 32        | 20      | 40        | 100000     | &#32;         |               | (Space)       | Space                |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 33        | 21      | 41        | 100001     | &#33;         | &excl;        | !             | Exclamation Mark     |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 35        | 23      | 43        | 100011     | &#35;         | &num;         | #             | Hash or Number       |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 36        | 24      | 44        | 100100     | &#36;         | &dollar;      | $             | Dollar Sign          |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 37        | 25      | 45        | 100101     | &#37;         | &percnt;      | %             | Percentage           |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 38        | 26      | 46        | 100110     | &#38;         | &amp;         | &             | Ampersand            |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 40        | 28      | 50        | 101000     | &#40;         | &lpar;        | (             | Left Parenthesis     |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 41        | 29      | 51        | 101001     | &#41;         | &rpar;        | )             | Right Parenthesis    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 42        | 2A      | 52        | 101010     | &#42;         | &ast;         | *             | Asterisk             |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 43        | 2B      | 53        | 101011     | &#43;         | &plus;        | +             | Plus Sign            |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 44        | 2C      | 54        | 101100     | &#44;         | &comma;       | ,             | Comma                |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 47        | 2F      | 57        | 101111     | &#47;         | &sol;         | /             | Slash                |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 59        | 3B      | 73        | 111011     | &#59;         | &semi;        | ;             | Semicolon            |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 60        | 3C      | 74        | 111100     | &#60;         | &lt;          | <             | Less Than            |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 61        | 3D      | 75        | 111101     | &#61;         | &equals;      | =             | Equals Sign          |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 62        | 3E      | 76        | 111110     | &#62;         | &gt;          | >             | Greater Than         |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 63        | 3F      | 77        | 111111     | &#63;         | &quest;       | ?             | Question Mark        |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 64        | 40      | 100       | 1000000    | &#64;         | &commat;      | @             | At Sign              |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 91        | 5B      | 133       | 1011011    | &#91;         | &lsqb;        | [             | Left Square Bracket  |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 92        | 5C      | 134       | 1011100    | &#92;         | &bsol;        | \             | Backslash            |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 93        | 5D      | 135       | 1011101    | &#93;         | &rsqb;        | ]             | Right Square Bracket |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 94        | 5E      | 136       | 1011110    | &#94;         | &hat;         | ^             | Caret or Circumflex  |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 95        | 5F      | 137       | 1011111    | &#95;         | &lowbar;      | _             | Underscore           |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 96        | 60      | 140       | 1100000    | &#96;         | &grave;       | `             | Grave Accent         |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 123       | 7B      | 173       | 1111011    | &#123;        | &lcub;        | {             | Left Curly Bracket   |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 124       | 7C      | 174       | 1111100    | &#124;        | &verbar;      | |             | Vertical Bar         |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 125       | 7D      | 175       | 1111101    | &#125;        | &rcub;        | }             | Right Curly Bracket  |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+
| 126       | 7E      | 176       | 1111110    | &#126;        | &tilde;       | ~             | Tilde                |
+-----------+---------+-----------+------------+---------------+---------------+---------------+----------------------+

Non-Printable ASCII Characters
^^^^^^^^^^^^^^^^^^^^^^^^^^^^
The following table shows the supported non-printable ASCII characters:

+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| **ASCII** | **Hex** | **Octal** | **Binary** | **HTML Code** | **HTML Name** | **Character** | **Description**           |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 0         | 0       | 0         | 0          | &#0;          |               | NUL           | Null                      |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 1         | 1       | 1         | 1          | &#1;          |               | SOH           | Start of Heading          |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 2         | 2       | 2         | 10         | &#2;          |               | STX           | Start of Text             |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 3         | 3       | 3         | 11         | &#3;          |               | ETX           | End of Text               |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 4         | 4       | 4         | 100        | &#4;          |               | EOT           | End of Transmission       |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 5         | 5       | 5         | 101        | &#5;          |               | ENQ           | Enquiry                   |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 6         | 6       | 6         | 110        | &#6;          |               | ACK           | Acknowledge               |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 7         | 7       | 7         | 111        | &#7;          |               | BEL           | Bell                      |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 8         | 8       | 10        | 1000       | &#8;          |               | BS            | Backspace                 |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 9         | 9       | 11        | 1001       | &#9;          |               | HT            | Horizontal Tab            |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 11        | 0B      | 13        | 1011       | &#11;         |               | VT            | Vertical Tab              |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 12        | 0C      | 14        | 1100       | &#12;         |               | FF            | NP Form Feed, New Page    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 14        | 0E      | 16        | 1110       | &#14;         |               | SO            | Shift Out                 |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 15        | 0F      | 17        | 1111       | &#15;         |               | SI            | Shift In                  |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 16        | 10      | 20        | 10000      | &#16;         |               | DLE           | Data Link Escape          |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 17        | 11      | 21        | 10001      | &#17;         |               | DC1           | Device Control 1          |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 18        | 12      | 22        | 10010      | &#18;         |               | DC2           | Device Control 2          |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 19        | 13      | 23        | 10011      | &#19;         |               | DC3           | Device Control 3          |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 20        | 14      | 24        | 10100      | &#20;         |               | DC4           | Device Control 4          |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 21        | 15      | 25        | 10101      | &#21;         |               | NAK           | Negative Acknowledge      |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 22        | 16      | 26        | 10110      | &#22;         |               | SYN           | Synchronous Idle          |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 23        | 17      | 27        | 10111      | &#23;         |               | ETB           | End of Transmission Block |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 24        | 18      | 30        | 11000      | &#24;         |               | CAN           | Cancel                    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 25        | 19      | 31        | 11001      | &#25;         |               | EM            | End of Medium             |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 26        | 1A      | 32        | 11010      | &#26;         |               | SUB           | Substitute                |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 27        | 1B      | 33        | 11011      | &#27;         |               | ESC           | Escape                    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 28        | 1C      | 34        | 11100      | &#28;         |               | FS            | File Separator            |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 29        | 1D      | 35        | 11101      | &#29;         |               | GS            | Group Separator           |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 30        | 1E      | 36        | 11110      | &#30;         |               | RS            | Record Separator          |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 31        | 1F      | 37        | 11111      | &#31;         |               | US            | Unit Separator            |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
| 127       | 7F      | 177       | 1111111    | &#127;        |               | DEL           | Delete                    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+---------------------------+
   
A tab can be specified by escaping it, for example ``\t``. Other non-printable characters can be specified using their octal representations, by using the ``E'\000'`` format, where ``000`` is the octal value of the character.

For example, ASCII character ``15``, known as "shift in", can be specified using ``E'\017'``.

.. note:: Delimiters are only applicable to the CSV file format.

Date Format
---------------
The date format in the output CSV is formatted as ISO 8601 (``2019-12-31 20:30:55.123``), regardless of how it was parsed initially with :ref:`COPY FROM date parsers<copy_date_parsers>`.

Unsupported ASCII Field Delimiters
------------------------------
The following table shows the unsupported ASCII field delimiters:

+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| **ASCII** | **Hex** | **Octal** | **Binary** | **HTML Code** | **HTML Name** | **Character** | **Description**        |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 10        | 0A      | 12        | 1010       | &#10;         |               | LF            | NL Line Feed, New Line |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 13        | 0D      | 15        | 1101       | &#13;         |               | CR            | Carriage Return        |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 34        | 22      | 42        | 100010     | &#34;         | &quot;        | "             | Double Quote           |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 39        | 27      | 47        | 100111     | &#39;         | &apos;        | '             | Single Quote           |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 45        | 2D      | 55        | 101101     | &#45;         | &minus;       | &#45;         | Minus Sign             |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 46        | 2E      | 56        | 101110     | &#46;         | &period;      | .             | Period                 |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 48        | 30      | 60        | 110000     | &#48;         |               | 0             | Zero                   |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 49        | 31      | 61        | 110001     | &#49;         |               | 1             | Number One             |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 50        | 32      | 62        | 110010     | &#50;         |               | 2             | Number Two             |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 51        | 33      | 63        | 110011     | &#51;         |               | 3             | Number Three           |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 52        | 34      | 64        | 110100     | &#52;         |               | 4             | Number Four            |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 53        | 35      | 65        | 110101     | &#53;         |               | 5             | Number Five            |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 54        | 36      | 66        | 110110     | &#54;         |               | 6             | Number Six             |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 55        | 37      | 67        | 110111     | &#55;         |               | 7             | Number Seven           |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 56        | 38      | 70        | 111000     | &#56;         |               | 8             | Number Eight           |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 57        | 39      | 71        | 111001     | &#57;         |               | 9             | Number Nine            |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 58        | 3A      | 72        | 111010     | &#58;         | &colon;       | :             | Colon                  |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 65        | 41      | 101       | 1000001    | &#65;         |               | A             | Upper Case Letter A    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 66        | 42      | 102       | 1000010    | &#66;         |               | B             | Upper Case Letter B    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 67        | 43      | 103       | 1000011    | &#67;         |               | C             | Upper Case Letter C    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 68        | 44      | 104       | 1000100    | &#68;         |               | D             | Upper Case Letter D    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 69        | 45      | 105       | 1000101    | &#69;         |               | E             | Upper Case Letter E    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 70        | 46      | 106       | 1000110    | &#70;         |               | F             | Upper Case Letter F    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 71        | 47      | 107       | 1000111    | &#71;         |               | G             | Upper Case Letter G    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 72        | 48      | 110       | 1001000    | &#72;         |               | H             | Upper Case Letter H    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 73        | 49      | 111       | 1001001    | &#73;         |               | I             | Upper Case Letter I    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 74        | 4A      | 112       | 1001010    | &#74;         |               | J             | Upper Case Letter J    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 75        | 4B      | 113       | 1001011    | &#75;         |               | K             | Upper Case Letter K    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 76        | 4C      | 114       | 1001100    | &#76;         |               | L             | Upper Case Letter L    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 77        | 4D      | 115       | 1001101    | &#77;         |               | M             | Upper Case Letter M    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 78        | 4E      | 116       | 1001110    | &#78;         |               | N             | Upper Case Letter N    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 79        | 4F      | 117       | 1001111    | &#79;         |               | O             | Upper Case Letter O    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 80        | 50      | 120       | 1010000    | &#80;         |               | P             | Upper Case Letter P    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 81        | 51      | 121       | 1010001    | &#81;         |               | Q             | Upper Case Letter Q    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 82        | 52      | 122       | 1010010    | &#82;         |               | R             | Upper Case Letter R    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 83        | 53      | 123       | 1010011    | &#83;         |               | S             | Upper Case Letter S    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 84        | 54      | 124       | 1010100    | &#84;         |               | T             | Upper Case Letter T    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 85        | 55      | 125       | 1010101    | &#85;         |               | U             | Upper Case Letter U    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 86        | 56      | 126       | 1010110    | &#86;         |               | V             | Upper Case Letter V    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 87        | 57      | 127       | 1010111    | &#87;         |               | W             | Upper Case Letter W    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 88        | 58      | 130       | 1011000    | &#88;         |               | X             | Upper Case Letter X    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 89        | 59      | 131       | 1011001    | &#89;         |               | Y             | Upper Case Letter Y    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 90        | 5A      | 132       | 1011010    | &#90;         |               | Z             | Upper Case Letter Z    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 97        | 61      | 141       | 1100001    | &#97;         |               | a             | Lower Case Letter a    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 98        | 62      | 142       | 1100010    | &#98;         |               | b             | Lower Case Letter b    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 99        | 63      | 143       | 1100011    | &#99;         |               | c             | Lower Case Letter c    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 100       | 64      | 144       | 1100100    | &#100;        |               | d             | Lower Case Letter d    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 101       | 65      | 145       | 1100101    | &#101;        |               | e             | Lower Case Letter e    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 102       | 66      | 146       | 1100110    | &#102;        |               | f             | Lower Case Letter f    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 103       | 67      | 147       | 1100111    | &#103;        |               | g             | Lower Case Letter g    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 104       | 68      | 150       | 1101000    | &#104;        |               | h             | Lower Case Letter h    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 105       | 69      | 151       | 1101001    | &#105;        |               | i             | Lower Case Letter i    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 106       | 6A      | 152       | 1101010    | &#106;        |               | j             | Lower Case Letter j    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 107       | 6B      | 153       | 1101011    | &#107;        |               | k             | Lower Case Letter k    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 108       | 6C      | 154       | 1101100    | &#108;        |               | l             | Lower Case Letter l    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 109       | 6D      | 155       | 1101101    | &#109;        |               | m             | Lower Case Letter m    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 110       | 6E      | 156       | 1101110    | &#110;        |               | n             | Lower Case Letter n    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 111       | 6F      | 157       | 1101111    | &#111;        |               | o             | Lower Case Letter o    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 112       | 70      | 160       | 1110000    | p             |               | p             | Lower Case Letter p    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 113       | 71      | 161       | 1110001    | &#113;        |               | q             | Lower Case Letter q    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 114       | 72      | 162       | 1110010    | &#114;        |               | r             | Lower Case Letter r    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 115       | 73      | 163       | 1110011    | &#115;        |               | s             | Lower Case Letter s    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 116       | 74      | 164       | 1110100    | &#116;        |               | t             | Lower Case Letter t    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 117       | 75      | 165       | 1110101    | &#117;        |               | u             | Lower Case Letter u    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 118       | 76      | 166       | 1110110    | &#118;        |               | v             | Lower Case Letter v    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 119       | 77      | 167       | 1110111    | &#119;        |               | w             | Lower Case Letter w    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 120       | 78      | 170       | 1111000    | &#120;        |               | x             | Lower Case Letter x    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 121       | 79      | 171       | 1111001    | &#121;        |               | y             | Lower Case Letter y    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+
| 122       | 7A      | 172       | 1111010    | &#122;        |               | z             | Lower Case Letter z    |
+-----------+---------+-----------+------------+---------------+---------------+---------------+------------------------+

Examples
===========

Exporting a Table to a CSV File without a HEADER Row
------------------------------------
The following is an example of exporting a table to a CSV file without a HEADER row:

.. code-block:: psql
   
   COPY nba TO WRAPPER csv_fdw OPTIONS (LOCATION = '/tmp/nba_export.csv', DELIMITER = ',', HEADER = false);

.. code-block:: console
   
   $ head -n6 nba.csv
   Avery Bradley,Boston Celtics,0,PG,25,6-2,180,Texas,7730337
   Jae Crowder,Boston Celtics,99,SF,25,6-6,235,Marquette,6796117
   John Holland,Boston Celtics,30,SG,27,6-5,205,Boston University,\N
   R.J. Hunter,Boston Celtics,28,SG,22,6-5,185,Georgia State,1148640
   Jonas Jerebko,Boston Celtics,8,PF,29,6-10,231,\N,5000000
   Amir Johnson,Boston Celtics,90,PF,29,6-9,240,\N,12000000

Exporting a Table to a CSV with a HEADER Row
-----------------------------------------
The following is an example of exporting a table to a CSV file with a HEADER row:

.. code-block:: psql
   
	COPY nba TO WRAPPER csv_fdw OPTIONS (LOCATION = '/tmp/nba_export.csv', DELIMITER = ',', HEADER = true);

.. code-block:: console
   
   $ head -n6 nba_h.csv
   Name,Team,Number,Position,Age,Height,Weight,College,Salary
   Avery Bradley,Boston Celtics,0,PG,25,6-2,180,Texas,7730337
   Jae Crowder,Boston Celtics,99,SF,25,6-6,235,Marquette,6796117
   John Holland,Boston Celtics,30,SG,27,6-5,205,Boston University,\N
   R.J. Hunter,Boston Celtics,28,SG,22,6-5,185,Georgia State,1148640
   Jonas Jerebko,Boston Celtics,8,PF,29,6-10,231,\N,5000000

Exporting a Table to TSV with a HEADER Row
-----------------------------------------
The following is an example of exporting a table to a TSV file with a HEADER row:

.. code-block:: psql
   
	COPY nba TO WRAPPER csv_fdw OPTIONS (LOCATION = '/tmp/nba_export.csv', DELIMITER = '|', HEADER = true);

.. code-block:: console
   
   $ head -n6 nba_h.tsv
   Name    Team    Number  Position        Age     Height  Weight  College Salary
   Avery Bradley   Boston Celtics  0       PG      25      6-2     180     Texas  7730337
   Jae Crowder     Boston Celtics  99      SF      25      6-6     235     Marquette       6796117
   John Holland    Boston Celtics  30      SG      27      6-5     205     Boston University       \N
   R.J. Hunter     Boston Celtics  28      SG      22      6-5     185     Georgia State   1148640
   Jonas Jerebko   Boston Celtics  8       PF      29      6-10    231     \N     5000000

Using Non-Printable ASCII Characters as Delimiters
-------------------------------------------------------
The following is an example of using non-printable ASCII characters as delimiters:

Non-printable characters can be specified using their octal representations, by using the ``E'\000'`` format, where ``000`` is the octal value of the character.

For example, ASCII character ``15``, known as "shift in", can be specified using ``E'\017'``.

.. code-block:: psql
   
	COPY nba TO WRAPPER csv_fdw OPTIONS (LOCATION = '/tmp/nba_export.csv', DELIMITER = E'\017');   

.. code-block:: psql
   
	COPY nba TO WRAPPER csv_fdw OPTIONS (LOCATION = '/tmp/nba_export.csv', DELIMITER = E'\011'); -- 011 is a tab character

Exporting the Result of a Query to CSV File
--------------------------------------------
The following is an example of exporting the result of a query to a CSV file:

.. code-block:: psql
   
	COPY (SELECT "Team", AVG("Salary") FROM nba GROUP BY 1) TO WRAPPER csv_fdw OPTIONS (LOCATION = '/tmp/nba_export.csv');

.. code-block:: console
   
   $ head -n5 nba_salaries.csv
   Atlanta Hawks,4860196
   Boston Celtics,4181504
   Brooklyn Nets,3501898
   Charlotte Hornets,5222728
   Chicago Bulls,5785558

Saving Files to an Authenticated S3 Bucket
--------------------------------------------
The following is an example of saving files to an authenticated S3 bucket:

.. code-block:: psql
   
	COPY (SELECT "Team", AVG("Salary") FROM nba GROUP BY 1) TO WRAPPER csv_fdw OPTIONS (LOCATION = 's3://my_bucket/salaries/nba_export.csv', AWS_ID = 'my_aws_id', AWS_SECRET = 'my_aws_secret');

Saving Files to an HDFS Path
--------------------------------------------
The following is an example of saving files to an HDFS path:

.. code-block:: psql
   
   	COPY (SELECT "Team", AVG("Salary") FROM nba GROUP BY 1) TO WRAPPER csv_fdw OPTIONS (LOCATION = 'hdfs://pp_namenode:8020/nba_export.csv');

Exporting a Table to a Parquet File
------------------------------
The following is an example of exporting a table to a Parquet file:

.. code-block:: psql
   
	COPY nba TO WRAPPER parquet_fdw OPTIONS (LOCATION = '/tmp/nba_export.parquet');

Exporting a Query to a Parquet File
--------------------------------
The following is an example of exporting a query to a Parquet file:

.. code-block:: psql

	COPY (select x,y from t where z=0) TO WRAPPER parquet_fdw OPTIONS (LOCATION = '/tmp/file.parquet');

Exporting a Table to an ORC File
------------------------------
The following is an example of exporting a table to an ORC file:

.. code-block:: psql
   
	COPY nba TO WRAPPER orc_fdw OPTIONS (LOCATION = '/tmp/nba_export.orc');

Permissions
=============
The role must have the ``SELECT`` permission on every table or schema that is referenced by the statement.