<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ORC &mdash; SQream Blue 1.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="JSON" href="json.html" />
    <link rel="prev" title="Parquet" href="parquet.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #133148" >
            <a href="../index.html">
            <img src="../_static/SQream_logo_without background-15.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/login_and_connectors.html">Login and Connectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/cost_management.html">Cost Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/performing_basic_sqream_operations.html">Performing Basic SQream Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/running_the_sqream_sql_client.html">Running the SQream SQL Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/creating_your_first_table.html">Creating Your First Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/listing_tables.html">Listing Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/inserting_rows.html">Inserting Rows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/running_queries.html">Running Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/saving_query_results_to_a_csv_or_psv_file.html">Saving Query Results to a CSV or PSV File</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/blue_console.html">BLUE Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/sql/index.html">SQL Statements and Syntax</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/sql/sql_syntax/index.html">SQL Syntax Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/sql/sql_statements/index.html">SQL Statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/sql/sql_functions/index.html">SQL Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/sql/sql_functions/scalar_functions/index.html">Built-In Scalar Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/sql/sql_functions/user_defined_functions/index.html">User-Defined Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/sql/sql_functions/aggregate_functions/index.html">Aggregate Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/sql/sql_functions/window_functions/index.html">Window Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/sql_feature_support.html">SQL Feature Checklist</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data_type_guides/index.html">Data Type Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../data_type_guides/converting_and_casting_types.html">Converting and Casting Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_type_guides/supported_data_types.html">Supported Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_type_guides/supported_casts.html">Supported Casts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_numeric.html">Numeric</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_boolean.html">Boolean</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_integer.html">Integer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_floating_point.html">Floating Point</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_string.html">String</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_date.html">Date</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">File Types</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="file_types_overview.html">File Types Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="avro.html">Avro</a></li>
<li class="toctree-l2"><a class="reference internal" href="csv.html">CSV</a></li>
<li class="toctree-l2"><a class="reference internal" href="parquet.html">Parquet</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">ORC</a></li>
<li class="toctree-l2"><a class="reference internal" href="json.html">JSON</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../feature_guides/index.html">Feature Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../feature_guides/python_functions.html">Python UDF (User-Defined Functions)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../feature_guides/concurrency_and_locks.html">Concurrency and Locks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../feature_guides/concurrency_and_scaling_in_sqream.html">Concurrency and Scaling in SQream DB</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../operational_guides/index.html">Operational Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/access_control.html">Access Control</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../operational_guides/access_control_overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operational_guides/access_control_managing_roles.html">Managing Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operational_guides/access_control_permissions.html">Permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operational_guides/access_control_password_policy.html">Password Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operational_guides/access_control_departmental_example.html">Departmental Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/audit_log_operation.html">Audit Log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/exporting_data.html">Exporting Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/monitoring_query_performance.html">Monitoring Query Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/seeing_system_objects_as_ddl.html">Seeing System Objects as DDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/optimization_best_practices.html">Optimization and Best Practices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_guides/index.html">Configuration Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guides/bucket/bucket_integration.html">Bucket Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guides/spooling.html">Configuring the Spooling Feature</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guides/configuring_sqream.html">Configuring SQream</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guides/configuration_flags.html">Configuration Flags</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guides/admin_flags.html">Administration Flags</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../configuration_guides/admin_regular_flags.html">Regular Administration Flags</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration_guides/admin_worker_flags.html">Worker Administration Flags</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guides/generic_flags.html">Generic Flags</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../configuration_guides/generic_regular_flags.html">Regular Generic Flags</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration_guides/generic_worker_flags.html">Worker Generic Flags</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../loading_and_unloading_data/index.html">Loading and Unloading Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/index.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/remedying_slow_queries.html">Remedying Slow Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/resolving_common_issues.html">Resolving Common Issues</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/lock_related_issues.html">Lock Related Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/information_for_support.html">Gathering Information for SQream Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #133148" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SQream Blue</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">File Types</a> &raquo;</li>
      <li>ORC</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="orc">
<span id="id1"></span><h1>ORC<a class="headerlink" href="#orc" title="Permalink to this heading"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#prepare-the-files" id="id18">Prepare the files</a></p></li>
<li><p><a class="reference internal" href="#figure-out-the-table-structure" id="id19">Figure out the table structure</a></p></li>
<li><p><a class="reference internal" href="#verify-table-contents" id="id20">Verify table contents</a></p></li>
</ul>
</div>
<p>This guide covers ingesting data from ORC files into BLUE using <span class="xref std std-ref">FOREIGN TABLE</span>.</p>
<section id="prepare-the-files">
<h2><a class="toc-backref" href="#id18">Prepare the files</a><a class="headerlink" href="#prepare-the-files" title="Permalink to this heading"></a></h2>
<p>Prepare the source ORC files, with the following requirements:</p>
<table class="colwidths-given docutils align-default">
<colgroup>
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 22%" />
<col style="width: 22%" />
<col style="width: 22%" />
<col style="width: 22%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
<col style="width: 2%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>BLUE type →</p>
<p>ORC source</p>
</th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">BOOL</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">TINYINT</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">SMALLINT</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">INT</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">BIGINT</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">REAL</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">DOUBLE</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">TEXT</span></code> <a class="footnote-reference brackets" href="#f0" id="id2">1</a></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">DATE</span></code></p></th>
<th class="head"><p><code class="docutils literal notranslate"><span class="pre">DATETIME</span></code></p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">boolean</span></code></p></td>
<td><p>Supported</p></td>
<td><p>Supported <a class="footnote-reference brackets" href="#f5" id="id3">2</a></p></td>
<td><p>Supported <a class="footnote-reference brackets" href="#f5" id="id4">2</a></p></td>
<td><p>Supported <a class="footnote-reference brackets" href="#f5" id="id5">2</a></p></td>
<td><p>Supported <a class="footnote-reference brackets" href="#f5" id="id6">2</a></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">tinyint</span></code></p></td>
<td><p>○ <a class="footnote-reference brackets" href="#f6" id="id7">3</a></p></td>
<td><p>Supported</p></td>
<td><p>Supported</p></td>
<td><p>Supported</p></td>
<td><p>Supported</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">smallint</span></code></p></td>
<td><p>○ <a class="footnote-reference brackets" href="#f6" id="id8">3</a></p></td>
<td><p>○ <a class="footnote-reference brackets" href="#f7" id="id9">4</a></p></td>
<td><p>Supported</p></td>
<td><p>Supported</p></td>
<td><p>Supported</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">int</span></code></p></td>
<td><p>○ <a class="footnote-reference brackets" href="#f6" id="id10">3</a></p></td>
<td><p>○ <a class="footnote-reference brackets" href="#f7" id="id11">4</a></p></td>
<td><p>○ <a class="footnote-reference brackets" href="#f7" id="id12">4</a></p></td>
<td><p>Supported</p></td>
<td><p>Supported</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">bigint</span></code></p></td>
<td><p>○ <a class="footnote-reference brackets" href="#f6" id="id13">3</a></p></td>
<td><p>○ <a class="footnote-reference brackets" href="#f7" id="id14">4</a></p></td>
<td><p>○ <a class="footnote-reference brackets" href="#f7" id="id15">4</a></p></td>
<td><p>○ <a class="footnote-reference brackets" href="#f7" id="id16">4</a></p></td>
<td><p>Supported</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">float</span></code></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Supported</p></td>
<td><p>Supported</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">double</span></code></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Supported</p></td>
<td><p>Supported</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">string</span></code> / <code class="docutils literal notranslate"><span class="pre">char</span></code> / <code class="docutils literal notranslate"><span class="pre">text</span></code></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Supported</p></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">date</span></code></p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Supported</p></td>
<td><p>Supported</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">timestamp</span></code>, <code class="docutils literal notranslate"><span class="pre">timestamp</span></code> with timezone</p></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
<td><p>Supported</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>If an ORC file has an unsupported type like <code class="docutils literal notranslate"><span class="pre">binary</span></code>, <code class="docutils literal notranslate"><span class="pre">list</span></code>, <code class="docutils literal notranslate"><span class="pre">map</span></code>, and <code class="docutils literal notranslate"><span class="pre">union</span></code>, but the data is not referenced in the table (it does not appear in the <a class="reference internal" href="../reference/sql/sql_statements/dml_commands/select.html#select"><span class="std std-ref">SELECT</span></a> query), the statement will succeed. If the column is referenced, an error will be thrown to the user, explaining that the type is not supported, but the column may be ommited. This can be worked around. See more information in the examples.</p></li>
</ul>
<p class="rubric">Footnotes</p>
<dl class="footnote brackets">
<dt class="label" id="f0"><span class="brackets"><a class="fn-backref" href="#id2">1</a></span></dt>
<dd><p>Text values include <code class="docutils literal notranslate"><span class="pre">TEXT</span></code></p>
</dd>
<dt class="label" id="f5"><span class="brackets">2</span><span class="fn-backref">(<a href="#id3">1</a>,<a href="#id4">2</a>,<a href="#id5">3</a>,<a href="#id6">4</a>)</span></dt>
<dd><p>Boolean values are cast to 0, 1</p>
</dd>
<dt class="label" id="f6"><span class="brackets">3</span><span class="fn-backref">(<a href="#id7">1</a>,<a href="#id8">2</a>,<a href="#id10">3</a>,<a href="#id13">4</a>)</span></dt>
<dd><p>Will succeed if all values are 0, 1</p>
</dd>
<dt class="label" id="f7"><span class="brackets">4</span><span class="fn-backref">(<a href="#id9">1</a>,<a href="#id11">2</a>,<a href="#id12">3</a>,<a href="#id14">4</a>,<a href="#id15">5</a>,<a href="#id16">6</a>)</span></dt>
<dd><p>Will succeed if all values fit the destination type</p>
</dd>
</dl>
</section>
<section id="figure-out-the-table-structure">
<h2><a class="toc-backref" href="#id19">Figure out the table structure</a><a class="headerlink" href="#figure-out-the-table-structure" title="Permalink to this heading"></a></h2>
<p>Prior to loading data, you will need to write out the table structure, so that it matches the file structure.</p>
<p>For example, to import the data from <code class="docutils literal notranslate"><span class="pre">nba.orc</span></code>, we will first look at the source table:</p>
<table class="colwidths-auto docutils align-default" id="id17">
<caption><span class="caption-text">nba.orc</span><a class="headerlink" href="#id17" title="Permalink to this table"></a></caption>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Team</p></th>
<th class="head"><p>Number</p></th>
<th class="head"><p>Position</p></th>
<th class="head"><p>Age</p></th>
<th class="head"><p>Height</p></th>
<th class="head"><p>Weight</p></th>
<th class="head"><p>College</p></th>
<th class="head"><p>Salary</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Avery Bradley</p></td>
<td><p>Boston Celtics</p></td>
<td><p>0</p></td>
<td><p>PG</p></td>
<td><p>25</p></td>
<td><p>44714</p></td>
<td><p>180</p></td>
<td><p>Texas</p></td>
<td><p>7730337</p></td>
</tr>
<tr class="row-odd"><td><p>Jae Crowder</p></td>
<td><p>Boston Celtics</p></td>
<td><p>99</p></td>
<td><p>SF</p></td>
<td><p>25</p></td>
<td><p>44718</p></td>
<td><p>235</p></td>
<td><p>Marquette</p></td>
<td><p>6796117</p></td>
</tr>
<tr class="row-even"><td><p>John Holland</p></td>
<td><p>Boston Celtics</p></td>
<td><p>30</p></td>
<td><p>SG</p></td>
<td><p>27</p></td>
<td><p>44717</p></td>
<td><p>205</p></td>
<td><p>Boston University</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>R.J. Hunter</p></td>
<td><p>Boston Celtics</p></td>
<td><p>28</p></td>
<td><p>SG</p></td>
<td><p>22</p></td>
<td><p>44717</p></td>
<td><p>185</p></td>
<td><p>Georgia State</p></td>
<td><p>1148640</p></td>
</tr>
<tr class="row-even"><td><p>Jonas Jerebko</p></td>
<td><p>Boston Celtics</p></td>
<td><p>8</p></td>
<td><p>PF</p></td>
<td><p>29</p></td>
<td><p>44722</p></td>
<td><p>231</p></td>
<td></td>
<td><p>5000000</p></td>
</tr>
<tr class="row-odd"><td><p>Amir Johnson</p></td>
<td><p>Boston Celtics</p></td>
<td><p>90</p></td>
<td><p>PF</p></td>
<td><p>29</p></td>
<td><p>44721</p></td>
<td><p>240</p></td>
<td></td>
<td><p>12000000</p></td>
</tr>
<tr class="row-even"><td><p>Jordan Mickey</p></td>
<td><p>Boston Celtics</p></td>
<td><p>55</p></td>
<td><p>PF</p></td>
<td><p>21</p></td>
<td><p>44720</p></td>
<td><p>235</p></td>
<td><p>LSU</p></td>
<td><p>1170960</p></td>
</tr>
<tr class="row-odd"><td><p>Kelly Olynyk</p></td>
<td><p>Boston Celtics</p></td>
<td><p>41</p></td>
<td><p>C</p></td>
<td><p>25</p></td>
<td><p>36708</p></td>
<td><p>238</p></td>
<td><p>Gonzaga</p></td>
<td><p>2165160</p></td>
</tr>
<tr class="row-even"><td><p>Terry Rozier</p></td>
<td><p>Boston Celtics</p></td>
<td><p>12</p></td>
<td><p>PG</p></td>
<td><p>22</p></td>
<td><p>44714</p></td>
<td><p>190</p></td>
<td><p>Louisville</p></td>
<td><p>1824360</p></td>
</tr>
</tbody>
</table>
<ul class="simple">
<li><p>The file is stored on S3, at <code class="docutils literal notranslate"><span class="pre">s3://sqream-demo-data/nba.orc</span></code>.</p></li>
</ul>
<p>We will make note of the file structure to create a matching <code class="docutils literal notranslate"><span class="pre">CREATE</span> <span class="pre">FOREIGN</span> <span class="pre">TABLE</span></code> statement.</p>
<div class="highlight-postgres notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">ext_nba</span><span class="w"></span>
<span class="p">(</span><span class="w"></span>
<span class="w">     </span><span class="k">Name</span><span class="w">       </span><span class="nb">TEXT</span><span class="p">(</span><span class="mf">40</span><span class="p">),</span><span class="w"></span>
<span class="w">     </span><span class="n">Team</span><span class="w">       </span><span class="nb">TEXT</span><span class="p">(</span><span class="mf">40</span><span class="p">),</span><span class="w"></span>
<span class="w">     </span><span class="n">Number</span><span class="w">     </span><span class="nb">BIGINT</span><span class="p">,</span><span class="w"></span>
<span class="w">     </span><span class="k">Position</span><span class="w">   </span><span class="nb">TEXT</span><span class="p">(</span><span class="mf">2</span><span class="p">),</span><span class="w"></span>
<span class="w">     </span><span class="n">Age</span><span class="w">        </span><span class="nb">BIGINT</span><span class="p">,</span><span class="w"></span>
<span class="w">     </span><span class="n">Height</span><span class="w">     </span><span class="nb">TEXT</span><span class="p">(</span><span class="mf">4</span><span class="p">),</span><span class="w"></span>
<span class="w">     </span><span class="n">Weight</span><span class="w">     </span><span class="nb">BIGINT</span><span class="p">,</span><span class="w"></span>
<span class="w">     </span><span class="n">College</span><span class="w">    </span><span class="nb">TEXT</span><span class="p">(</span><span class="mf">40</span><span class="p">),</span><span class="w"></span>
<span class="w">     </span><span class="n">Salary</span><span class="w">     </span><span class="k">FLOAT</span><span class="w"></span>
<span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="k">WRAPPER</span><span class="w"> </span><span class="n">orc_fdw</span><span class="w"></span>
<span class="w">   </span><span class="k">OPTIONS</span><span class="w"></span>
<span class="w">     </span><span class="p">(</span><span class="w"></span>
<span class="w">        </span><span class="k">LOCATION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;s3://sqream-demo-data/nba.orc&#39;</span><span class="w"></span>
<span class="w">     </span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Types in BLUE must match ORC types according to the table above.</p>
<p>If the column type isn’t supported, a possible workaround is to set it to any arbitrary type and then exclude it from subsequent queries.</p>
</div>
</section>
<section id="verify-table-contents">
<h2><a class="toc-backref" href="#id20">Verify table contents</a><a class="headerlink" href="#verify-table-contents" title="Permalink to this heading"></a></h2>
<p>External tables do not verify file integrity or structure, so verify that the table definition matches up and contains the correct data.</p>
<div class="highlight-psql notranslate"><div class="highlight"><pre><span></span><span class="gp">t=&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ext_nba</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mf">10</span><span class="p">;</span><span class="w"></span>
<span class="go">Name          | Team           | Number | Position | Age | Height | Weight | College           | Salary</span>
<span class="go">--------------+----------------+--------+----------+-----+--------+--------+-------------------+---------</span>
<span class="go">Avery Bradley | Boston Celtics |      0 | PG       |  25 | 6-2    |    180 | Texas             |  7730337</span>
<span class="go">Jae Crowder   | Boston Celtics |     99 | SF       |  25 | 6-6    |    235 | Marquette         |  6796117</span>
<span class="go">John Holland  | Boston Celtics |     30 | SG       |  27 | 6-5    |    205 | Boston University |</span>
<span class="go">R.J. Hunter   | Boston Celtics |     28 | SG       |  22 | 6-5    |    185 | Georgia State     |  1148640</span>
<span class="go">Jonas Jerebko | Boston Celtics |      8 | PF       |  29 | 6-10   |    231 |                   |  5000000</span>
<span class="go">Amir Johnson  | Boston Celtics |     90 | PF       |  29 | 6-9    |    240 |                   | 12000000</span>
<span class="go">Jordan Mickey | Boston Celtics |     55 | PF       |  21 | 6-8    |    235 | LSU               |  1170960</span>
<span class="go">Kelly Olynyk  | Boston Celtics |     41 | C        |  25 | 7-0    |    238 | Gonzaga           |  2165160</span>
<span class="go">Terry Rozier  | Boston Celtics |     12 | PG       |  22 | 6-2    |    190 | Louisville        |  1824360</span>
<span class="go">Marcus Smart  | Boston Celtics |     36 | PG       |  22 | 6-4    |    220 | Oklahoma State    |  3431040</span>
</pre></div>
</div>
<p>If any errors show up at this stage, verify the structure of the ORC files and match them to the external table structure you created.</p>
<section id="working-around-unsupported-column-types">
<h3>Working around unsupported column types<a class="headerlink" href="#working-around-unsupported-column-types" title="Permalink to this heading"></a></h3>
<p>Suppose you only want to load some of the columns - for example, if one of the columns isn’t supported.</p>
<p>By ommitting unsupported columns from queries that access the <code class="docutils literal notranslate"><span class="pre">EXTERNAL</span> <span class="pre">TABLE</span></code>, they will never be called, and will not cause a “type mismatch” error.</p>
<p>For this example, assume that the <code class="docutils literal notranslate"><span class="pre">Position</span></code> column isn’t supported because of its type.</p>
<div class="highlight-postgres notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">nba</span><span class="w"> </span><span class="k">AS</span><span class="w"></span>
<span class="w">   </span><span class="k">SELECT</span><span class="w"> </span><span class="k">Name</span><span class="p">,</span><span class="w"> </span><span class="n">Team</span><span class="p">,</span><span class="w"> </span><span class="n">Number</span><span class="p">,</span><span class="w"> </span><span class="k">NULL</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="k">Position</span><span class="p">,</span><span class="w"> </span><span class="n">Age</span><span class="p">,</span><span class="w"> </span><span class="n">Height</span><span class="p">,</span><span class="w"> </span><span class="n">Weight</span><span class="p">,</span><span class="w"> </span><span class="n">College</span><span class="p">,</span><span class="w"> </span><span class="n">Salary</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">ext_nba</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- We ommitted the unsupported column `Position` from this query, and replaced it with a default ``NULL`` value, to maintain the same table structure.</span>
</pre></div>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="parquet.html" class="btn btn-neutral float-left" title="Parquet" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="json.html" class="btn btn-neutral float-right" title="JSON" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023 SQream.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>