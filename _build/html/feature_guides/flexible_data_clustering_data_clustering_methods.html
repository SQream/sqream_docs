<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Data Clustering Methods &mdash; SQream DB 2022.3_preview documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Rechunking Data" href="flexible_data_clustering_data_rechunking_data.html" />
    <link rel="prev" title="What are Chunks?" href="flexible_data_clustering_chunks.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #0f9790" >
            <a href="../index.html">
            <img src="../_static/sqream_logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/preparing_your_machine_to_install_sqream.html">Preparing Your Machine to Install SQream</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/installing_sqream.html">Installing SQream</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/executing_statements_in_sqream.html">Executing Statements in SQream</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/performing_basic_sqream_operations.html">Performing Basic SQream Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/running_the_sqream_sql_client.html">Running the SQream SQL Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/creating_your_first_table.html">Creating Your First Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/listing_tables.html">Listing Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/inserting_rows.html">Inserting Rows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/running_queries.html">Running Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/deleting_rows.html">Deleting Rows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/saving_query_results_to_a_csv_or_psv_file.html">Saving Query Results to a CSV or PSV File</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/hardware_guide.html">Hardware Guide</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../installation_guides/index.html">Installation Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../installation_guides/installing_and_launching_sqream.html">Installing and Launching SQream</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation_guides/recommended_pre-installation_configurations.html">Recommended Pre-Installation Configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation_guides/installing_sqream_with_kubernetes.html">Installing SQream with Kubernetes</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../installation_guides/sqream_studio_installation.html">Installing SQream Studio</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../installation_guides/installing_prometheus_exporters.html">Installing Prometheus Exporter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation_guides/installing_prometheus_using_binary_packages.html">Installing Prometheus Using Binary Packages</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation_guides/installing_dashboard_data_collector.html">Installing the Dashboard Data Collector</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation_guides/installing_studio_on_stand_alone_server.html">Installing Studio on a Stand-Alone Server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../installation_guides/installing_nginx_proxy_over_secure_connection.html">Installing an NGINX Proxy Over a Secure Connection</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data_ingestion/index.html">Data Ingestion Sources</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../data_ingestion/inserting_data.html">Inserting Data Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_ingestion/csv.html">Inserting Data from a CSV File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_ingestion/parquet.html">Inserting Data from a Parquet File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_ingestion/orc.html">Inserting Data from an ORC File</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../connecting_to_sqream/index.html">Connecting to SQream</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../connecting_to_sqream/client_drivers/index.html">Client Drivers for 2022.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../connecting_to_sqream/client_drivers/jdbc/index.html">JDBC</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../external_storage_platforms/index.html">External Storage Platforms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../external_storage_platforms/s3.html">Inserting Data Using Amazon S3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../external_storage_platforms/hdfs.html">Using SQream in an HDFS Environment</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../loading_and_unloading_data/index.html">Loading and Unloading Data</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Feature Guides</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="compression.html">Compression</a></li>
<li class="toctree-l2"><a class="reference internal" href="data_encryption.html">Data Encryption</a><ul>
<li class="toctree-l3"><a class="reference internal" href="data_encryption_overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_encryption_methods.html">Encryption Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_encryption_types.html">Data Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="data_encryption_syntax.html">Syntax</a></li>
</ul>
</li>
<li class="toctree-l2 current"><a class="reference internal" href="flexible_data_clustering.html">Flexible Data Clustering</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="flexible_data_clustering_overview.html">Overeview</a></li>
<li class="toctree-l3"><a class="reference internal" href="flexible_data_clustering_chunks.html">What are Chunks?</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Data Clustering Methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="flexible_data_clustering_data_rechunking_data.html">Rechunking Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="flexible_data_clustering_data_examples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="python_functions.html">Python UDF (User-Defined Functions)</a></li>
<li class="toctree-l2"><a class="reference internal" href="transactions.html">Transactions</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency_and_locks.html">Concurrency and Locks</a></li>
<li class="toctree-l2"><a class="reference internal" href="concurrency_and_scaling_in_sqream.html">Concurrency and Scaling in SQream DB</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../operational_guides/index.html">Operational Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/access_control.html">Access Control</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../operational_guides/access_control_overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operational_guides/access_control_managing_roles.html">Managing Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operational_guides/access_control_permissions.html">Permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operational_guides/access_control_password_policy.html">Password Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="../operational_guides/access_control_departmental_example.html">Departmental Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/audit_log_operation.html">Audit Log</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/creating_or_cloning_a_storage_cluster.html">Creating or Cloning Storage Clusters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/delete_guide.html">Deleting Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/exporting_data.html">Exporting Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/logging.html">Logging</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/monitoring_query_performance.html">Monitoring Query Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/seeing_system_objects_as_ddl.html">Seeing System Objects as DDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/optimization_best_practices.html">Optimization and Best Practices</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/mounting_an_nfs_shared_drive.html">Mounting an NFS Shared Drive</a></li>
<li class="toctree-l2"><a class="reference internal" href="../operational_guides/mounting_a_san_shared_drive.html">Mounting a SAN Shared Drive</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../sqream_studio_5.4.3/index.html">SQream Acceleration Studio 5.4.3</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../sqream_studio_5.4.3/getting_started.html">Getting Started with SQream Acceleration Studio 5.4.3</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sqream_studio_5.4.3/monitoring_workers_and_services_from_the_dashboard.html">Monitoring Workers and Services from the Dashboard</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sqream_studio_5.4.3/executing_statements_and_running_queries_from_the_editor.html">Executing Statements and Running Queries from the Editor</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sqream_studio_5.4.3/viewing_logs.html">Viewing Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../sqream_studio_5.4.3/creating_assigning_and_managing_roles_and_permissions.html">Creating, Assigning, and Managing Roles and Permissions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../architecture/index.html">System Architecture</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../architecture/internals_architecture.html">Internals and architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../architecture/filesystem_and_filesystem_usage.html">Filesystem and usage</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_guides/index.html">Configuration Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guides/spooling.html">Configuring the Spooling Feature</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guides/configuring_sqream.html">Configuring SQream</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guides/configuration_flags.html">Configuration Flags</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guides/admin_flags.html">Administration Flags</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../configuration_guides/admin_regular_flags.html">Regular Administration Flags</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration_guides/admin_worker_flags.html">Worker Administration Flags</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guides/generic_flags.html">Generic Flags</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../configuration_guides/generic_regular_flags.html">Regular Generic Flags</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration_guides/generic_worker_flags.html">Worker Generic Flags</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/sql/index.html">SQL Statements and Syntax</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/sql/sql_syntax/index.html">SQL Syntax Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/sql/sql_statements/index.html">SQL Statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/sql/sql_functions/index.html">SQL Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/sql/sql_functions/scalar_functions/index.html">Built-In Scalar Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/sql/sql_functions/user_defined_functions/index.html">User-Defined Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/sql/sql_functions/aggregate_functions/index.html">Aggregate Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/sql/sql_functions/window_functions/index.html">Window Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/catalog_reference.html">Catalog Reference Guide</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/catalog_reference_overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/catalog_reference_schema_information.html">What Information Does the Schema Contain?</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/catalog_reference_catalog_tables.html">Catalog Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/catalog_reference_additonal_tables.html">Additional Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/catalog_reference_examples.html">Examples</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/cli/index.html">Command Line Programs</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/cli/metadata_server.html">metadata_server</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/cli/sqreamd.html">sqreamd</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/cli/sqream_console.html">sqream-console</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/cli/server_picker.html">server_picker</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/cli/sqream_storage.html">SqreamStorage</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/cli/sqream_sql.html">sqream sql</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/cli/upgrade_storage.html">upgrade_storage</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/sql_feature_support.html">SQL Feature Checklist</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data_type_guides/index.html">Data Type Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../data_type_guides/converting_and_casting_types.html">Converting and Casting Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_type_guides/supported_data_types.html">Supported Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_type_guides/supported_casts.html">Supported Casts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_numeric.html">Numeric</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_boolean.html">Boolean</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_integer.html">Integer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_floating_point.html">Floating Point</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_string.html">String</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_date.html">Date</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release Notes</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../releases/2021.2_index.html">Release Notes 2021.2</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/2021.2.1.html">Release Notes 2021.2.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../releases/2021.2.html">Release Notes 2021.2</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../releases/2021.1_index.html">Release Notes 2021.1</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/2021.1.2.html">Release Notes 2021.1.2</a></li>
<li class="toctree-l3"><a class="reference internal" href="../releases/2021.1.1.html">Release Notes 2021.1.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../releases/2021.1.html">Release Notes 2021.1</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../releases/2020.3_index.html">Release Notes 2020.3</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../releases/2020.3.2.1.html">Release Notes 2020.3.2.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../releases/2020.3.1.html">Release Notes 2020.3.1</a></li>
<li class="toctree-l3"><a class="reference internal" href="../releases/2020.3.html">Release Notes 2020.3</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../releases/2020.2.html">Release Notes 2020.2</a></li>
<li class="toctree-l2"><a class="reference internal" href="../releases/2020.1.html">Release Notes 2020.1</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/index.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/remedying_slow_queries.html">Remedying Slow Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/resolving_common_issues.html">Resolving Common Issues</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/examining_logs.html">Examining Logs</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/identifying_configuration_issues.html">Identifying Configuration Issues</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/lock_related_issues.html">Lock Related Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/log_related_issues.html">Log Related Issues</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/core_dumping_related_issues.html">Core Dumping Related Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/information_for_support.html">Gathering Information for SQream Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #0f9790" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SQream DB</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="index.html">Feature Guides</a> &raquo;</li>
          <li><a href="flexible_data_clustering.html">Flexible Data Clustering</a> &raquo;</li>
      <li>Data Clustering Methods</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="data-clustering-methods">
<span id="flexible-data-clustering-data-clustering-methods"></span><h1>Data Clustering Methods<a class="headerlink" href="#data-clustering-methods" title="Permalink to this heading"></a></h1>
<p>The following data clustering methods can be used in tandem or separately to enhance query performance:</p>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#using-time-based-data-management" id="id2">Using Time-Based Data Management</a></p></li>
<li><p><a class="reference internal" href="#using-clustering-keys" id="id3">Using Clustering Keys</a></p></li>
<li><p><a class="reference internal" href="#using-metadata" id="id4">Using Metadata</a></p></li>
<li><p><a class="reference internal" href="#using-chunks-and-extents" id="id5">Using Chunks and Extents</a></p></li>
</ul>
</div>
<section id="using-time-based-data-management">
<h2><a class="toc-backref" href="#id2">Using Time-Based Data Management</a><a class="headerlink" href="#using-time-based-data-management" title="Permalink to this heading"></a></h2>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h3>
<p><strong>Time-based data management</strong> refers to sorting table data along naturally occuring dimensions. The most common and naturally occuring sorting mechanism is a <strong>timestamp</strong>, which indicates the point in time at which data was inserted into SQream. Because SQream is a columnar storage system, timestamped metadata facilitates quick and easy query processing.</p>
<p>The following is the correct syntax for timestamping a chunk:</p>
<div class="highlight-postgres notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">DATEPART</span><span class="p">(</span><span class="k">HOUR</span><span class="p">,</span><span class="w"> </span><span class="nb">timestamp</span><span class="p">),</span><span class="w"></span>
<span class="w">       </span><span class="n">MIN</span><span class="p">(</span><span class="n">transaction_amount</span><span class="p">),</span><span class="w"></span>
<span class="w">       </span><span class="n">MAX</span><span class="p">(</span><span class="n">transaction_amount</span><span class="p">),</span><span class="w"></span>
<span class="w">       </span><span class="n">avg</span><span class="p">(</span><span class="n">transaction_amount</span><span class="p">)</span><span class="w"></span>
<span class="k">FROM</span><span class="w"> </span><span class="n">transactions</span><span class="w"></span>
<span class="k">WHERE</span><span class="w"> </span><span class="nb">timestamp</span><span class="w"> </span><span class="k">BETWEEN</span><span class="w"> </span><span class="p">(</span><span class="k">CURRENT_TIMESTAMP</span><span class="w"> </span><span class="k">AND</span><span class="w"> </span><span class="n">DATEADD</span><span class="p">(</span><span class="k">MONTH</span><span class="p">,</span><span class="o">-</span><span class="mf">3</span><span class="p">,</span><span class="k">CURRENT_TIMESTAMP</span><span class="p">))</span><span class="w"></span>
<span class="k">GROUP</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="mf">1</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>Timestamping data includes the following properties:</p>
<ul>
<li><p>Data is loaded in a natural order while being inserted.</p>
<blockquote>
<div></div></blockquote>
</li>
<li><p>Updates are infrequent or non-existent. Updates occur by inserting new rows, which have their own timestamps.</p>
<blockquote>
<div></div></blockquote>
</li>
<li><p>Queries on timestamped data is typically on continuous time range.</p>
<blockquote>
<div></div></blockquote>
</li>
<li><p>Inserting and reading data are performed independently, not in the operation or transaction.</p>
<blockquote>
<div></div></blockquote>
</li>
<li><p>Timestamped data has a high data volume and accumulates faster than typical online transactional processing workloads.</p></li>
</ul>
<p>The following are some scenarios ideal for timestamping:</p>
<ul>
<li><p>Running analytical queries spanning specific date ranges (such as the sum of transactions during August-July 2020 versus August-July 2019).</p>
<blockquote>
<div></div></blockquote>
</li>
<li><p>Deleting data older than a specific number of months old.</p>
<blockquote>
<div></div></blockquote>
</li>
<li><p>Regulations require you to maintain several years of data that you do not need to query on a regular basis.</p></li>
</ul>
</section>
<section id="best-practices-for-time-based-management">
<h3>Best Practices for Time-Based Management<a class="headerlink" href="#best-practices-for-time-based-management" title="Permalink to this heading"></a></h3>
<p>Data inserted in bulks is automatically timestamped with the insertion date and time. Therefore, inserting data through small and frequent bulks has the effect of naturally ordering data according to timestamp. Frequent bulks generally refers to short time frames, such as at 15-minute, hourly, or daily intervals. As you insert new data, SQream chunks and appends it into your existing tables according to its timestamp.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">DATE</span></code> and <code class="docutils literal notranslate"><span class="pre">DATETIME</span></code> types were created to improve performance, minimze storage size, and maintain data integrity. SQream recommends using them instead of <code class="docutils literal notranslate"><span class="pre">TEXT</span></code>.</p>
</section>
</section>
<section id="using-clustering-keys">
<h2><a class="toc-backref" href="#id3">Using Clustering Keys</a><a class="headerlink" href="#using-clustering-keys" title="Permalink to this heading"></a></h2>
<section id="id1">
<h3>Overview<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<p>While data clustering occurs relatively naturally within a table, certain practices can be used to actively enhance query performance and runtime. Defining <strong>clustering keys</strong> increases performance by explicitly co-locating your data, enabling SQream to avoid processing irrelevant chunks.</p>
<p>A clustering key is a subset of table columns or expressions and is defined using the <code class="docutils literal notranslate"><span class="pre">CLUSTER</span> <span class="pre">BY</span></code> statement, as shown below:</p>
<div class="highlight-postgres notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="p">(</span><span class="w"></span>
<span class="w">   </span><span class="k">name</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="n">start_date</span><span class="w"> </span><span class="n">datetime</span><span class="w"> </span><span class="k">not</span><span class="w"> </span><span class="k">null</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="n">country</span><span class="w"> </span><span class="nb">TEXT</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="s1">&#39;Unknown&#39;</span><span class="w"> </span><span class="k">NOT</span><span class="w"> </span><span class="k">NULL</span><span class="w"></span>
<span class="p">)</span><span class="w"> </span><span class="k">CLUSTER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">country</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">CLUSTER</span> <span class="pre">BY</span></code> statement splits ingested data based on the range of data corresponding to the clustering key. This helps create chunks based on specific or related data, avoiding mixed chunks as much as possible. For example, instead of creating chunks based on a fixed number of rows, the <code class="docutils literal notranslate"><span class="pre">CLUSTER_BY</span></code> statement creates them based on common values. This optimizes the <code class="docutils literal notranslate"><span class="pre">DELETE</span></code> command as well, which deletes rows based on their location in a table.</p>
<p>For more information, see the following:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://docs.sqream.com/en/latest/reference/sql/sql_statements/ddl_commands/cluster_by.html">The CLUSTER_BY statement</a></p></li>
<li><p><a class="reference external" href="https://docs.sqream.com/en/latest/reference/sql/sql_statements/dml_commands/delete.html">The DELETE statement</a></p></li>
<li><p><a class="reference external" href="https://docs.sqream.com/en/latest/feature_guides/delete_guide.html">The Deleting Data Guide</a></p></li>
</ul>
</section>
<section id="inspecting-clustered-table-health">
<h3>Inspecting Clustered Table Health<a class="headerlink" href="#inspecting-clustered-table-health" title="Permalink to this heading"></a></h3>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">clustering_health</span></code> utility function to check how well a table is clustered, as shown below:</p>
<div class="highlight-postgres notranslate"><div class="highlight"><pre><span></span><span class="k">SELECT</span><span class="w"> </span><span class="n">CLUSTERING_HEALTH</span><span class="p">(</span><span class="s1">&#39;table_name&#39;</span><span class="p">,</span><span class="s1">&#39;clustering_keys&#39;</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">CLUSTERING_HEALTH</span></code> function returns the average clustering depth of your table relative to the clustering keys. A lower value indicates a well-clustered table.</p>
<p>Clustering keys are useful for restructuring large tables not optimally ordered when inserted or as a result of extensive DML. A table that uses clustering keys is referred to as a <strong>clustered table</strong>. Tables that are not clustered require SQream’s query optimizer to scan entire tables while running queries, dramatically increasing runtime. Some queries significantly benefit from clustering, such as filtering or joining extensively on clustered columns.</p>
<p>SQream partially sorts data that you load into a clustered table. Note that while clustering tables increases query performance, clustering during the insertion stage can decrease performance by 75%. Nevertheless, once a table is clustered subsequent queries run more quickly.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To determine whether clustering will enhance performance, SQream recommends end-to-end testing your clustering keys on a small subset of your data before committing them to permanent use. This is relevant for testing insert and query performance.</p>
</div>
<p>For more information, see the following:</p>
<ul class="simple">
<li><p><strong>Data Manipulation commands (DML)</strong> - see <a class="reference external" href="https://docs.sqream.com/en/latest/reference/sql/sql_statements/index.html#data-manipulation-commands-dml">Data Manipulation Commands (DML)</a>.</p></li>
<li><p><strong>Creating tables</strong> - see <a class="reference internal" href="../reference/sql/sql_statements/ddl_commands/create_table.html#create-table"><span class="std std-ref">CREATE TABLE</span></a>. When you create a table, all new data is clustered upon insert.</p></li>
<li><p><strong>Modifying tables</strong> - see <a class="reference internal" href="../reference/sql/sql_statements/ddl_commands/cluster_by.html#cluster-by"><span class="std std-ref">CLUSTER BY</span></a>.</p></li>
<li><p><strong>Modifying a table schema</strong> - see <a class="reference internal" href="../reference/sql/sql_statements/ddl_commands/alter_table.html#alter-table"><span class="std std-ref">ALTER TABLE</span></a>.</p></li>
</ul>
</section>
</section>
<section id="using-metadata">
<h2><a class="toc-backref" href="#id4">Using Metadata</a><a class="headerlink" href="#using-metadata" title="Permalink to this heading"></a></h2>
<p>SQream uses an automated and transparent system for collecting metadata describing each chunk. This metadata enables skipping unnecessary chunks and extents during query runtime. The system collects chunk metadata when data is inserted into SQream. This is done by splitting data into chunks and collecting and storing specific parameters to be used later.</p>
<p>Because collecting metadata is not process-heavy and does not contribute significantly to query processing, it occurs continuously as a background process. Most metadata collection is typically performed by the GPU. For example, for a 10TB dataset, the metadata storage overhead is approximately 0.5GB.</p>
<p>When a query includes a filter (such as a <code class="docutils literal notranslate"><span class="pre">WHERE</span></code> or <code class="docutils literal notranslate"><span class="pre">JOIN</span></code> condition) on a range of values spanning a fraction of the table values, SQream scans only the filtered segment of the table.</p>
<p>Once collected, several metadata parameters are stored for later use, including:</p>
<ul>
<li><p>The range of values on each column chunk (minimum, maximum).</p>
<blockquote>
<div></div></blockquote>
</li>
<li><p>The number of values.</p>
<blockquote>
<div></div></blockquote>
</li>
<li><p>Additional information for query optimization.</p></li>
</ul>
<p>Data is collected automatically and transparently on every column type.</p>
<p>Queries filtering highly granular date and time ranges are the most effective, particularly when data is timestamped, and when tables contain a large amount of historical data.</p>
</section>
<section id="using-chunks-and-extents">
<h2><a class="toc-backref" href="#id5">Using Chunks and Extents</a><a class="headerlink" href="#using-chunks-and-extents" title="Permalink to this heading"></a></h2>
<p>SQream stores data in logical tables made up of rows spanning one or more columns. Internally, data is stored in vertical partitions by column, and horizontally by chunks. The <strong>Using Chunks and Extents</strong> section describes how to leverge chunking to optimize query performance.</p>
<p>A <strong>chunk</strong> is a contiguous number of rows in a specific column. Depending on data type, a chunk’s uncompressed size typically ranges between 1MB and a few hundred megabytes. This size range is suitable for filtering and deleting data from large tables, which may contain between hundreds, millions, or billions of chunks.</p>
<p>An <strong>extent</strong> is a specific number of contiguous chunks. Extents optimize disk access patterns, at around 20MB uncompressed, on-disk. Extents typically include between one and 25 chunks based on the compressed size of each chunk.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>SQream compresses all data. In addition, all tables are automatically and transparently chunked.</p>
</div>
<p>Unlike node-partitioning (or sharding), chunks are:</p>
<ul>
<li><p>Small enough to be read concurrently by multiple workers.</p>
<blockquote>
<div></div></blockquote>
</li>
<li><p>Optimized for inserting data quickly.</p>
<blockquote>
<div></div></blockquote>
</li>
<li><p>Capable of carrying metadata, which narrows down their contents for the query optimizer.</p>
<blockquote>
<div></div></blockquote>
</li>
<li><p>Ideal for data retension because they can be deleted in bulk.</p>
<blockquote>
<div></div></blockquote>
</li>
<li><p>Optimized for reading into RAM and the GPU.</p>
<blockquote>
<div></div></blockquote>
</li>
<li><p>Compressed individually to improve compression and data locality.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="flexible_data_clustering_chunks.html" class="btn btn-neutral float-left" title="What are Chunks?" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="flexible_data_clustering_data_rechunking_data.html" class="btn btn-neutral float-right" title="Rechunking Data" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022 SQream.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>