<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Foreign Tables &mdash; SQream Blue 1.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #133148" >
            <a href="../index.html">
            <img src="../_static/SQream_logo_without background-15.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/login_and_connectors.html">Login and Connectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/cost_management.html">Cost Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/performing_basic_sqream_operations.html">Performing Basic SQream Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/running_the_sqream_sql_client.html">Running the SQream SQL Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/creating_your_first_table.html">Creating Your First Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/listing_tables.html">Listing Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/inserting_rows.html">Inserting Rows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/running_queries.html">Running Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/saving_query_results_to_a_csv_or_psv_file.html">Saving Query Results to a CSV or PSV File</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/blue_console.html">BLUE Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/sql/index.html">SQL Statements and Syntax</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/sql/sql_syntax/index.html">SQL Syntax Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/sql/sql_statements/index.html">SQL Statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/sql/sql_functions/index.html">SQL Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/sql/sql_functions/scalar_functions/index.html">Built-In Scalar Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/sql/sql_functions/user_defined_functions/index.html">User-Defined Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/sql/sql_functions/aggregate_functions/index.html">Aggregate Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/sql/sql_functions/window_functions/index.html">Window Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/sql_feature_support.html">SQL Feature Checklist</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data_type_guides/index.html">Data Type Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../data_type_guides/converting_and_casting_types.html">Converting and Casting Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_type_guides/supported_data_types.html">Supported Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_type_guides/supported_casts.html">Supported Casts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_numeric.html">Numeric</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_boolean.html">Boolean</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_integer.html">Integer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_floating_point.html">Floating Point</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_string.html">String</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_date.html">Date</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../file_types/index.html">File Types</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../file_types/file_types_overview.html">File Types Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../file_types/avro.html">Avro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../file_types/csv.html">CSV</a></li>
<li class="toctree-l2"><a class="reference internal" href="../file_types/parquet.html">Parquet</a></li>
<li class="toctree-l2"><a class="reference internal" href="../file_types/orc.html">ORC</a></li>
<li class="toctree-l2"><a class="reference internal" href="../file_types/json.html">JSON</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../feature_guides/index.html">Feature Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../feature_guides/python_functions.html">Python UDF (User-Defined Functions)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../feature_guides/concurrency_and_locks.html">Concurrency and Locks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../feature_guides/concurrency_and_scaling_in_sqream.html">Concurrency and Scaling in SQream DB</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="index.html">Operational Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="access_control.html">Access Control</a><ul>
<li class="toctree-l3"><a class="reference internal" href="access_control_overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="access_control_managing_roles.html">Managing Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="access_control_permissions.html">Permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="access_control_password_policy.html">Password Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="access_control_departmental_example.html">Departmental Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="audit_log_operation.html">Audit Log</a></li>
<li class="toctree-l2"><a class="reference internal" href="exporting_data.html">Exporting Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="monitoring_query_performance.html">Monitoring Query Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="seeing_system_objects_as_ddl.html">Seeing System Objects as DDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization_best_practices.html">Optimization and Best Practices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_guides/index.html">Configuration Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guides/bucket/bucket_integration.html">Bucket Integration</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guides/spooling.html">Configuring the Spooling Feature</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guides/configuring_sqream.html">Configuring SQream</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guides/configuration_flags.html">Configuration Flags</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guides/admin_flags.html">Administration Flags</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../configuration_guides/admin_regular_flags.html">Regular Administration Flags</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration_guides/admin_worker_flags.html">Worker Administration Flags</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guides/generic_flags.html">Generic Flags</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../configuration_guides/generic_regular_flags.html">Regular Generic Flags</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration_guides/generic_worker_flags.html">Worker Generic Flags</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../loading_and_unloading_data/index.html">Loading and Unloading Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/index.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/remedying_slow_queries.html">Remedying Slow Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/resolving_common_issues.html">Resolving Common Issues</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/lock_related_issues.html">Lock Related Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/information_for_support.html">Gathering Information for SQream Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #133148" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SQream Blue</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>Foreign Tables</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="foreign-tables">
<span id="id1"></span><h1>Foreign Tables<a class="headerlink" href="#foreign-tables" title="Permalink to this heading"></a></h1>
<p>Foreign tables can be used to run queries directly on data without inserting it into SQream DB first.
SQream DB supports read only external tables, so you can query from external tables, but you cannot insert to them, or run deletes or updates on them.</p>
<p>Running queries directly on external data is most effectively used for things like one off querying. If you will be repeatedly querying data, the performance will usually be better if you insert the data into SQream DB first.</p>
<p>Although external tables can be used without inserting data into SQream DB, one of their main use cases is to help with the insertion process. An insert select statement on an external table can be used to insert data into SQream using the full power of the query engine to perform ETL.</p>
<div class="contents local topic" id="in-this-topic">
<p class="topic-title">In this topic:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#supported-data-formats" id="id2">Supported Data Formats</a></p></li>
<li><p><a class="reference internal" href="#supported-data-staging" id="id3">Supported Data Staging</a></p></li>
<li><p><a class="reference internal" href="#using-external-tables" id="id4">Using External Tables</a></p>
<ul>
<li><p><a class="reference internal" href="#planning-for-data-staging" id="id5">Planning for Data Staging</a></p></li>
<li><p><a class="reference internal" href="#creating-an-external-table" id="id6">Creating an External Table</a></p></li>
<li><p><a class="reference internal" href="#querying-external-tables" id="id7">Querying External Tables</a></p></li>
<li><p><a class="reference internal" href="#modifying-data-from-staging" id="id8">Modifying Data from Staging</a></p></li>
<li><p><a class="reference internal" href="#converting-an-external-table-to-a-standard-database-table" id="id9">Converting an External Table to a Standard Database Table</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#error-handling-and-limitations" id="id10">Error Handling and Limitations</a></p></li>
</ul>
</div>
<section id="supported-data-formats">
<h2><a class="toc-backref" href="#id2">Supported Data Formats</a><a class="headerlink" href="#supported-data-formats" title="Permalink to this heading"></a></h2>
<p>SQream DB supports external tables over:</p>
<ul class="simple">
<li><p>Text files (e.g. CSV, PSV, TSV)</p></li>
<li><p>ORC</p></li>
<li><p>Parquet</p></li>
</ul>
</section>
<section id="supported-data-staging">
<h2><a class="toc-backref" href="#id3">Supported Data Staging</a><a class="headerlink" href="#supported-data-staging" title="Permalink to this heading"></a></h2>
<p>SQream can stage data from:</p>
<ul class="simple">
<li><p>a local filesystem (e.g. <code class="docutils literal notranslate"><span class="pre">/mnt/storage/....</span></code>)</p></li>
<li><p><a class="reference internal" href="../cloud_storage_platforms/s3.html#s3"><span class="std std-ref">Ingesting Data Using Amazon S3</span></a> buckets (e.g. <code class="docutils literal notranslate"><span class="pre">s3://pp-secret-bucket/users/*.parquet</span></code>)</p></li>
<li><p><span class="xref std std-ref">hdfs</span> (e.g. <code class="docutils literal notranslate"><span class="pre">hdfs://hadoop-nn.piedpiper.com/rhendricks/*.csv</span></code>)</p></li>
</ul>
</section>
<section id="using-external-tables">
<h2><a class="toc-backref" href="#id4">Using External Tables</a><a class="headerlink" href="#using-external-tables" title="Permalink to this heading"></a></h2>
<p>Use an external table to stage data before loading from CSV, Parquet or ORC files.</p>
<section id="planning-for-data-staging">
<h3><a class="toc-backref" href="#id5">Planning for Data Staging</a><a class="headerlink" href="#planning-for-data-staging" title="Permalink to this heading"></a></h3>
<p>For the following examples, we will want to interact with a CSV file. Here’s a peek at the table contents:</p>
<p>The file is stored on <a class="reference internal" href="../cloud_storage_platforms/s3.html#s3"><span class="std std-ref">Ingesting Data Using Amazon S3</span></a>, at <code class="docutils literal notranslate"><span class="pre">s3://sqream-demo-data/nba_players.csv</span></code>.
We will make note of the file structure, to create a matching <code class="docutils literal notranslate"><span class="pre">CREATE_EXTERNAL_TABLE</span></code> statement.</p>
</section>
<section id="creating-an-external-table">
<h3><a class="toc-backref" href="#id6">Creating an External Table</a><a class="headerlink" href="#creating-an-external-table" title="Permalink to this heading"></a></h3>
<p>Based on the source file structure, we we <span class="xref std std-ref">create an external table</span> with the appropriate structure, and point it to the file.</p>
<div class="highlight-postgres notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">EXTERNAL</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">nba</span><span class="w"></span>
<span class="p">(</span><span class="w"></span>
<span class="w">   </span><span class="k">Name</span><span class="w"> </span><span class="nb">varchar</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="n">Team</span><span class="w"> </span><span class="nb">varchar</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="n">Number</span><span class="w"> </span><span class="n">tinyint</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="k">Position</span><span class="w"> </span><span class="nb">varchar</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="n">Age</span><span class="w"> </span><span class="n">tinyint</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="n">Height</span><span class="w"> </span><span class="nb">varchar</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="n">Weight</span><span class="w"> </span><span class="nb">real</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="n">College</span><span class="w"> </span><span class="nb">varchar</span><span class="p">,</span><span class="w"></span>
<span class="w">   </span><span class="n">Salary</span><span class="w"> </span><span class="k">float</span><span class="w"></span>
<span class="w"> </span><span class="p">)</span><span class="w"></span>
<span class="w">   </span><span class="k">USING</span><span class="w"> </span><span class="n">FORMAT</span><span class="w"> </span><span class="k">CSV</span><span class="w"> </span><span class="c1">-- Text file</span>
<span class="w">   </span><span class="k">WITH</span><span class="w">  </span><span class="nb">PATH</span><span class="w">  </span><span class="s1">&#39;s3://sqream-demo-data/nba_players.csv&#39;</span><span class="w"></span>
<span class="w">   </span><span class="nb">RECORD</span><span class="w"> </span><span class="k">DELIMITER</span><span class="w"> </span><span class="s1">&#39;\r\n&#39;</span><span class="p">;</span><span class="w"> </span><span class="c1">-- DOS delimited file</span>
</pre></div>
</div>
<p>The file format in this case is CSV, and it is stored as an <a class="reference internal" href="../cloud_storage_platforms/s3.html#s3"><span class="std std-ref">Ingesting Data Using Amazon S3</span></a> object (if the path is on <span class="xref std std-ref">hdfs</span>, change the URI accordingly).
We also took note that the record delimiter was a DOS newline (<code class="docutils literal notranslate"><span class="pre">\r\n</span></code>).</p>
</section>
<section id="querying-external-tables">
<h3><a class="toc-backref" href="#id7">Querying External Tables</a><a class="headerlink" href="#querying-external-tables" title="Permalink to this heading"></a></h3>
<p>Let’s peek at the data from the external table:</p>
<div class="highlight-psql notranslate"><div class="highlight"><pre><span></span><span class="gp">t=&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">nba</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mf">10</span><span class="p">;</span><span class="w"></span>
<span class="go">name          | team           | number | position | age | height | weight | college           | salary</span>
<span class="go">--------------+----------------+--------+----------+-----+--------+--------+-------------------+---------</span>
<span class="go">Avery Bradley | Boston Celtics |      0 | PG       |  25 | 6-2    |    180 | Texas             |  7730337</span>
<span class="go">Jae Crowder   | Boston Celtics |     99 | SF       |  25 | 6-6    |    235 | Marquette         |  6796117</span>
<span class="go">John Holland  | Boston Celtics |     30 | SG       |  27 | 6-5    |    205 | Boston University |</span>
<span class="go">R.J. Hunter   | Boston Celtics |     28 | SG       |  22 | 6-5    |    185 | Georgia State     |  1148640</span>
<span class="go">Jonas Jerebko | Boston Celtics |      8 | PF       |  29 | 6-10   |    231 |                   |  5000000</span>
<span class="go">Amir Johnson  | Boston Celtics |     90 | PF       |  29 | 6-9    |    240 |                   | 12000000</span>
<span class="go">Jordan Mickey | Boston Celtics |     55 | PF       |  21 | 6-8    |    235 | LSU               |  1170960</span>
<span class="go">Kelly Olynyk  | Boston Celtics |     41 | C        |  25 | 7-0    |    238 | Gonzaga           |  2165160</span>
<span class="go">Terry Rozier  | Boston Celtics |     12 | PG       |  22 | 6-2    |    190 | Louisville        |  1824360</span>
<span class="go">Marcus Smart  | Boston Celtics |     36 | PG       |  22 | 6-4    |    220 | Oklahoma State    |  3431040</span>
</pre></div>
</div>
</section>
<section id="modifying-data-from-staging">
<h3><a class="toc-backref" href="#id8">Modifying Data from Staging</a><a class="headerlink" href="#modifying-data-from-staging" title="Permalink to this heading"></a></h3>
<p>One of the main reasons for staging data is to examine the contents and modify them before loading them.
Assume we are unhappy with weight being in pounds, because we want to use kilograms instead. We can apply the transformation as part of a query:</p>
<div class="highlight-psql notranslate"><div class="highlight"><pre><span></span><span class="gp">t=&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">name</span><span class="p">,</span><span class="w"> </span><span class="n">team</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="k">position</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">weight</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.205</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">college</span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"></span>
<span class="mf">.</span><span class="w">          </span><span class="k">FROM</span><span class="w"> </span><span class="n">nba</span><span class="w"></span>
<span class="mf">.</span><span class="w">          </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">weight</span><span class="p">;</span><span class="w"></span>

<span class="go">name                     | team                   | number | position | age | height | weight   | college               | salary</span>
<span class="go">-------------------------+------------------------+--------+----------+-----+--------+----------+-----------------------+---------</span>
<span class="go">Nikola Pekovic           | Minnesota Timberwolves |     14 | C        |  30 | 6-11   |  139.229 |                       | 12100000</span>
<span class="go">Boban Marjanovic         | San Antonio Spurs      |     40 | C        |  27 | 7-3    | 131.5193 |                       |  1200000</span>
<span class="go">Al Jefferson             | Charlotte Hornets      |     25 | C        |  31 | 6-10   | 131.0658 |                       | 13500000</span>
<span class="go">Jusuf Nurkic             | Denver Nuggets         |     23 | C        |  21 | 7-0    | 126.9841 |                       |  1842000</span>
<span class="go">Andre Drummond           | Detroit Pistons        |      0 | C        |  22 | 6-11   | 126.5306 | Connecticut           |  3272091</span>
<span class="go">Kevin Seraphin           | New York Knicks        |      1 | C        |  26 | 6-10   | 126.0771 |                       |  2814000</span>
<span class="go">Brook Lopez              | Brooklyn Nets          |     11 | C        |  28 | 7-0    | 124.7166 | Stanford              | 19689000</span>
<span class="go">Jahlil Okafor            | Philadelphia 76ers     |      8 | C        |  20 | 6-11   | 124.7166 | Duke                  |  4582680</span>
<span class="go">Cristiano Felicio        | Chicago Bulls          |      6 | PF       |  23 | 6-10   | 124.7166 |                       |   525093</span>
<span class="go">[...]</span>
</pre></div>
</div>
<p>Now, if we’re happy with the results, we can convert the staged external table to a standard table</p>
</section>
<section id="converting-an-external-table-to-a-standard-database-table">
<h3><a class="toc-backref" href="#id9">Converting an External Table to a Standard Database Table</a><a class="headerlink" href="#converting-an-external-table-to-a-standard-database-table" title="Permalink to this heading"></a></h3>
<p><a class="reference internal" href="../reference/sql/sql_statements/ddl_commands/create_table_as.html#create-table-as"><span class="std std-ref">CREATE TABLE AS</span></a> can be used to materialize an external table into a regular table.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>If you intend to use the table multiple times, convert the external table to a standard table.</p>
</div>
<div class="highlight-psql notranslate"><div class="highlight"><pre><span></span><span class="gp">t=&gt;</span><span class="w"> </span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">real_nba</span><span class="w"> </span><span class="k">AS</span><span class="w"></span>
<span class="mf">.</span><span class="w">    </span><span class="k">SELECT</span><span class="w"> </span><span class="k">name</span><span class="p">,</span><span class="w"> </span><span class="n">team</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="k">position</span><span class="p">,</span><span class="w"> </span><span class="n">age</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="p">(</span><span class="n">weight</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mf">2.205</span><span class="p">)</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">weight</span><span class="p">,</span><span class="w"> </span><span class="n">college</span><span class="p">,</span><span class="w"> </span><span class="n">salary</span><span class="w"></span>
<span class="mf">.</span><span class="w">            </span><span class="k">FROM</span><span class="w"> </span><span class="n">nba</span><span class="w"></span>
<span class="mf">.</span><span class="w">            </span><span class="k">ORDER</span><span class="w"> </span><span class="k">BY</span><span class="w"> </span><span class="n">weight</span><span class="p">;</span><span class="w"></span>
<span class="go">executed</span>
<span class="gp">t=&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">real_nba</span><span class="w"> </span><span class="k">LIMIT</span><span class="w"> </span><span class="mf">5</span><span class="p">;</span><span class="w"></span>

<span class="go">name             | team                   | number | position | age | height | weight   | college     | salary</span>
<span class="go">-----------------+------------------------+--------+----------+-----+--------+----------+-------------+---------</span>
<span class="go">Nikola Pekovic   | Minnesota Timberwolves |     14 | C        |  30 | 6-11   |  139.229 |             | 12100000</span>
<span class="go">Boban Marjanovic | San Antonio Spurs      |     40 | C        |  27 | 7-3    | 131.5193 |             |  1200000</span>
<span class="go">Al Jefferson     | Charlotte Hornets      |     25 | C        |  31 | 6-10   | 131.0658 |             | 13500000</span>
<span class="go">Jusuf Nurkic     | Denver Nuggets         |     23 | C        |  21 | 7-0    | 126.9841 |             |  1842000</span>
<span class="go">Andre Drummond   | Detroit Pistons        |      0 | C        |  22 | 6-11   | 126.5306 | Connecticut |  3272091</span>
</pre></div>
</div>
</section>
</section>
<section id="error-handling-and-limitations">
<h2><a class="toc-backref" href="#id10">Error Handling and Limitations</a><a class="headerlink" href="#error-handling-and-limitations" title="Permalink to this heading"></a></h2>
<ul>
<li><p>Error handling in external tables is limited. Any error that occurs during source data parsing will result in the statement aborting.</p></li>
<li><p>External tables are logical and do not contain any data, their structure is not verified or enforced until a query uses the table.
For example, a CSV with the wrong delimiter may cause a query to fail, even though the table has been created successfully:</p>
<div class="highlight-psql notranslate"><div class="highlight"><pre><span></span><span class="gp">t=&gt;</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">FROM</span><span class="w"> </span><span class="n">nba</span><span class="p">;</span><span class="w"></span>
<span class="gp">master=&gt;</span><span class="w"> </span><span class="k">select</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">from</span><span class="w"> </span><span class="n">nba</span><span class="p">;</span><span class="w"></span>
<span class="go">Record delimiter mismatch during CSV parsing. User defined line delimiter \n does not match the first delimiter \r\n found in s3://sqream-demo-data/nba.csv</span>
</pre></div>
</div>
</li>
<li><p>Since the data for an external table is not stored in SQream DB, it can be changed or removed at any time by an external process. As a result, the same query can return different results each time it runs against an external table. Similarly, a query might fail if the external data is moved, removed, or has changed structure.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023 SQream.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>