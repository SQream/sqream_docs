<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Departmental Example &mdash; SQream Blue 1.0 documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/custom.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Audit Log" href="audit_log_operation.html" />
    <link rel="prev" title="Password Policy" href="access_control_password_policy.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search"  style="background: #133148" >
            <a href="../index.html">
            <img src="../_static/SQream_logo_without background-15.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../getting_started/index.html">Getting Started</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/login_and_connectors.html">Login and Connectors</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/cost_management.html">Cost Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getting_started/performing_basic_sqream_operations.html">Performing Basic SQream Operations</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/running_the_sqream_sql_client.html">Running the SQream SQL Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/creating_your_first_table.html">Creating Your First Table</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/listing_tables.html">Listing Tables</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/inserting_rows.html">Inserting Rows</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/running_queries.html">Running Queries</a></li>
<li class="toctree-l3"><a class="reference internal" href="../getting_started/saving_query_results_to_a_csv_or_psv_file.html">Saving Query Results to a CSV or PSV File</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data_ingestion/index.html">Data Ingestion Sources</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../data_ingestion/ingesting_data.html">Ingesting Data Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_ingestion/avro.html">Ingesting Data from Avro</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_ingestion/csv.html">Ingesting Data from a CSV File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_ingestion/parquet.html">Ingesting Data from a Parquet File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_ingestion/orc.html">Ingesting Data from an ORC File</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_ingestion/json.html">Ingesting Data from JSON</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../loading_and_unloading_data/index.html">Loading and Unloading Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feature_guides/index.html">Feature Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../feature_guides/python_functions.html">Python UDF (User-Defined Functions)</a></li>
<li class="toctree-l2"><a class="reference internal" href="../feature_guides/concurrency_and_locks.html">Concurrency and Locks</a></li>
<li class="toctree-l2"><a class="reference internal" href="../feature_guides/concurrency_and_scaling_in_sqream.html">Concurrency and Scaling in SQream DB</a></li>
</ul>
</li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Operational Guides</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="access_control.html">Access Control</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="access_control_overview.html">Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="access_control_managing_roles.html">Managing Roles</a></li>
<li class="toctree-l3"><a class="reference internal" href="access_control_permissions.html">Permissions</a></li>
<li class="toctree-l3"><a class="reference internal" href="access_control_password_policy.html">Password Policy</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Departmental Example</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="audit_log_operation.html">Audit Log</a></li>
<li class="toctree-l2"><a class="reference internal" href="exporting_data.html">Exporting Data</a></li>
<li class="toctree-l2"><a class="reference internal" href="monitoring_query_performance.html">Monitoring Query Performance</a></li>
<li class="toctree-l2"><a class="reference internal" href="security.html">Security</a></li>
<li class="toctree-l2"><a class="reference internal" href="seeing_system_objects_as_ddl.html">Seeing System Objects as DDL</a></li>
<li class="toctree-l2"><a class="reference internal" href="optimization_best_practices.html">Optimization and Best Practices</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../configuration_guides/index.html">Configuration Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guides/spooling.html">Configuring the Spooling Feature</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guides/configuring_sqream.html">Configuring SQream</a></li>
<li class="toctree-l2"><a class="reference internal" href="../configuration_guides/configuration_flags.html">Configuration Flags</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guides/admin_flags.html">Administration Flags</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../configuration_guides/admin_regular_flags.html">Regular Administration Flags</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration_guides/admin_worker_flags.html">Worker Administration Flags</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../configuration_guides/generic_flags.html">Generic Flags</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../configuration_guides/generic_regular_flags.html">Regular Generic Flags</a></li>
<li class="toctree-l4"><a class="reference internal" href="../configuration_guides/generic_worker_flags.html">Worker Generic Flags</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../reference/index.html">Reference</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../reference/blue_console.html">BLUE Console</a></li>
<li class="toctree-l2"><a class="reference internal" href="../reference/sql/index.html">SQL Statements and Syntax</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../reference/sql/sql_syntax/index.html">SQL Syntax Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/sql/sql_statements/index.html">SQL Statements</a></li>
<li class="toctree-l3"><a class="reference internal" href="../reference/sql/sql_functions/index.html">SQL Functions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../reference/sql/sql_functions/scalar_functions/index.html">Built-In Scalar Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/sql/sql_functions/user_defined_functions/index.html">User-Defined Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/sql/sql_functions/aggregate_functions/index.html">Aggregate Functions</a></li>
<li class="toctree-l4"><a class="reference internal" href="../reference/sql/sql_functions/window_functions/index.html">Window Functions</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../reference/sql_feature_support.html">SQL Feature Checklist</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../data_type_guides/index.html">Data Type Guides</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../data_type_guides/converting_and_casting_types.html">Converting and Casting Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_type_guides/supported_data_types.html">Supported Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="../data_type_guides/supported_casts.html">Supported Casts</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_numeric.html">Numeric</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_boolean.html">Boolean</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_integer.html">Integer</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_floating_point.html">Floating Point</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_string.html">String</a></li>
<li class="toctree-l3"><a class="reference internal" href="../data_type_guides/sql_data_types_date.html">Date</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../releases/index.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../troubleshooting/index.html">Troubleshooting</a><ul>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/remedying_slow_queries.html">Remedying Slow Queries</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/resolving_common_issues.html">Resolving Common Issues</a><ul class="simple">
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/lock_related_issues.html">Lock Related Issues</a></li>
<li class="toctree-l2"><a class="reference internal" href="../troubleshooting/information_for_support.html">Gathering Information for SQream Support</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../glossary.html">Glossary</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu"  style="background: #133148" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">SQream Blue</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Operational Guides</a></li>
          <li class="breadcrumb-item"><a href="access_control.html">Access Control</a></li>
      <li class="breadcrumb-item active">Departmental Example</li>

  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="departmental-example">
<span id="access-control-departmental-example"></span><h1>Departmental Example<a class="headerlink" href="#departmental-example" title="Permalink to this heading"></a></h1>
<p>You work in a company with several departments.</p>
<p>The example below shows you how to manage permissions in a database shared by multiple departments, where each department has different roles for the tables by schema. It walks you through how to set the permissions up for existing objects and how to set up default permissions rules to cover newly created objects.</p>
<p>The concept is that you set up roles for each new schema with the correct permissions, then the existing users can use these roles.</p>
<p>A superuser must do new setup for each new schema which is a limitation, but superuser permissions are not needed at any other time, and neither are explicit grant statements or object ownership changes.</p>
<p>In the example, the database is called <code class="docutils literal notranslate"><span class="pre">my_database</span></code>, and the new or existing schema being set up to be managed in this way is called <code class="docutils literal notranslate"><span class="pre">my_schema</span></code>.</p>
<p>Our departmental example has four user group roles and seven users roles</p>
<p>There will be a group for this schema for each of the following:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Group</p></th>
<th class="head"><p>Activities</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>database designers</p></td>
<td><p>create, alter and drop tables</p></td>
</tr>
<tr class="row-odd"><td><p>updaters</p></td>
<td><p>insert and delete data</p></td>
</tr>
<tr class="row-even"><td><p>readers</p></td>
<td><p>read data</p></td>
</tr>
<tr class="row-odd"><td><p>security officers</p></td>
<td><p>add and remove users from these groups</p></td>
</tr>
</tbody>
</table>
<section id="setting-up-the-department-permissions">
<h2>Setting up the department permissions<a class="headerlink" href="#setting-up-the-department-permissions" title="Permalink to this heading"></a></h2>
<p>As a superuser, you connect to the system and run the following:</p>
<div class="highlight-postgres notranslate"><div class="highlight"><pre><span></span><span class="c1">-- create the groups</span>

<span class="k">CREATE</span><span class="w"> </span><span class="k">ROLE</span><span class="w"> </span><span class="n">my_schema_security_officers</span><span class="p">;</span><span class="w"></span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">ROLE</span><span class="w"> </span><span class="n">my_schema_database_designers</span><span class="p">;</span><span class="w"></span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">ROLE</span><span class="w"> </span><span class="n">my_schema_updaters</span><span class="p">;</span><span class="w"></span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">ROLE</span><span class="w"> </span><span class="n">my_schema_readers</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- grant permissions for each role</span>
<span class="c1">-- we grant permissions for existing objects here too,</span>
<span class="c1">-- so you don&#39;t have to start with an empty schema</span>

<span class="c1">-- security officers</span>

<span class="k">GRANT</span><span class="w"> </span><span class="n">connect</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">my_database</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_security_officers</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">my_schema</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_security_officers</span><span class="p">;</span><span class="w"></span>

<span class="k">GRANT</span><span class="w"> </span><span class="n">my_schema_database_designers</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_security_officers</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="k">ADMIN</span><span class="w"> </span><span class="k">OPTION</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w"> </span><span class="n">my_schema_updaters</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_security_officers</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="k">ADMIN</span><span class="w"> </span><span class="k">OPTION</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w"> </span><span class="n">my_schema_readers</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_security_officers</span><span class="w"> </span><span class="k">WITH</span><span class="w"> </span><span class="k">ADMIN</span><span class="w"> </span><span class="k">OPTION</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- database designers</span>

<span class="k">GRANT</span><span class="w"> </span><span class="n">connect</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">my_database</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_database_designers</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">my_schema</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_database_designers</span><span class="p">;</span><span class="w"></span>

<span class="k">GRANT</span><span class="w"> </span><span class="k">create</span><span class="p">,</span><span class="n">ddl</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">my_schema</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_database_designers</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- updaters</span>

<span class="k">GRANT</span><span class="w"> </span><span class="n">connect</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">my_database</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_updaters</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">my_schema</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_updaters</span><span class="p">;</span><span class="w"></span>

<span class="k">GRANT</span><span class="w"> </span><span class="k">SELECT</span><span class="p">,</span><span class="k">INSERT</span><span class="p">,</span><span class="k">DELETE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">TABLES</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">my_schema</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_updaters</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- readers</span>

<span class="k">GRANT</span><span class="w"> </span><span class="n">connect</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">DATABASE</span><span class="w"> </span><span class="n">my_database</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_readers</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w"> </span><span class="n">usage</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">my_schema</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_readers</span><span class="p">;</span><span class="w"></span>

<span class="k">GRANT</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">TABLES</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="k">SCHEMA</span><span class="w"> </span><span class="n">my_schema</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_readers</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w"> </span><span class="k">EXECUTE</span><span class="w"> </span><span class="k">ON</span><span class="w"> </span><span class="k">ALL</span><span class="w"> </span><span class="k">FUNCTIONS</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_readers</span><span class="p">;</span><span class="w"></span>


<span class="c1">-- create the default permissions for new objects</span>

<span class="k">ALTER</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="n">PERMISSIONS</span><span class="w"> </span><span class="k">FOR</span><span class="w"> </span><span class="n">my_schema_database_designers</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">my_schema</span><span class="w"></span>
<span class="w"> </span><span class="k">FOR</span><span class="w"> </span><span class="k">TABLES</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">SELECT</span><span class="p">,</span><span class="k">INSERT</span><span class="p">,</span><span class="k">DELETE</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_updaters</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- For every table created by my_schema_database_designers, give access to my_schema_readers:</span>

<span class="k">ALTER</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="n">PERMISSIONS</span><span class="w"> </span><span class="k">FOR</span><span class="w"> </span><span class="n">my_schema_database_designers</span><span class="w"> </span><span class="k">IN</span><span class="w"> </span><span class="n">my_schema</span><span class="w"></span>
<span class="w"> </span><span class="k">FOR</span><span class="w"> </span><span class="k">TABLES</span><span class="w"> </span><span class="k">GRANT</span><span class="w"> </span><span class="k">SELECT</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">my_schema_readers</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ul>
<li><p>This process needs to be repeated by a user with <code class="docutils literal notranslate"><span class="pre">SUPERUSER</span></code> permissions each time a new schema is brought into this permissions management approach.</p></li>
<li><p>By default, any new object created will not be accessible by our new <code class="docutils literal notranslate"><span class="pre">my_schema_readers</span></code> group.
Running a <code class="docutils literal notranslate"><span class="pre">GRANT</span> <span class="pre">SELECT</span> <span class="pre">...</span></code> only affects objects that already exist in the schema or database.</p>
<p>If you’re getting a <code class="docutils literal notranslate"><span class="pre">Missing</span> <span class="pre">the</span> <span class="pre">following</span> <span class="pre">permissions:</span> <span class="pre">SELECT</span> <span class="pre">on</span> <span class="pre">table</span> <span class="pre">'database.public.tablename'</span></code> error, make sure that
you’ve altered the default permissions with the <code class="docutils literal notranslate"><span class="pre">ALTER</span> <span class="pre">DEFAULT</span> <span class="pre">PERMISSIONS</span></code> statement.</p>
</li>
</ul>
</div>
</section>
<section id="creating-new-users-in-the-departments">
<h2>Creating new users in the departments<a class="headerlink" href="#creating-new-users-in-the-departments" title="Permalink to this heading"></a></h2>
<p>After the group roles have been created, you can now create user roles for each of your users.</p>
<div class="highlight-postgres notranslate"><div class="highlight"><pre><span></span><span class="c1">-- create the new database designer users</span>

<span class="k">CREATE</span><span class="w">  </span><span class="k">ROLE</span><span class="w">  </span><span class="n">ecodd</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="n">LOGIN</span><span class="w">  </span><span class="k">TO</span><span class="w">  </span><span class="n">ecodd</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="k">PASSWORD</span><span class="w">  </span><span class="s1">&#39;ecodds_secret_password&#39;</span><span class="w">  </span><span class="k">TO</span><span class="w"> </span><span class="n">ecodd</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="n">CONNECT</span><span class="w">  </span><span class="k">ON</span><span class="w">  </span><span class="k">DATABASE</span><span class="w">  </span><span class="n">my_database</span><span class="w">  </span><span class="k">TO</span><span class="w">  </span><span class="n">ecodd</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w"> </span><span class="n">my_schema_database_designers</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">ecodd</span><span class="p">;</span><span class="w"></span>

<span class="k">CREATE</span><span class="w">  </span><span class="k">ROLE</span><span class="w">  </span><span class="n">ebachmann</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="n">LOGIN</span><span class="w">  </span><span class="k">TO</span><span class="w">  </span><span class="n">ebachmann</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="k">PASSWORD</span><span class="w">  </span><span class="s1">&#39;another_secret_password&#39;</span><span class="w">  </span><span class="k">TO</span><span class="w"> </span><span class="n">ebachmann</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="n">CONNECT</span><span class="w">  </span><span class="k">ON</span><span class="w">  </span><span class="k">DATABASE</span><span class="w">  </span><span class="n">my_database</span><span class="w">  </span><span class="k">TO</span><span class="w">  </span><span class="n">ebachmann</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w"> </span><span class="n">my_database_designers</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">ebachmann</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- If a user already exists, we can assign that user directly to the group</span>

<span class="k">GRANT</span><span class="w"> </span><span class="n">my_schema_updaters</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">rhendricks</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- Create users in the readers group</span>

<span class="k">CREATE</span><span class="w">  </span><span class="k">ROLE</span><span class="w">  </span><span class="n">jbarker</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="n">LOGIN</span><span class="w">  </span><span class="k">TO</span><span class="w">  </span><span class="n">jbarker</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="k">PASSWORD</span><span class="w">  </span><span class="s1">&#39;action_jack&#39;</span><span class="w">  </span><span class="k">TO</span><span class="w"> </span><span class="n">jbarker</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="n">CONNECT</span><span class="w">  </span><span class="k">ON</span><span class="w">  </span><span class="k">DATABASE</span><span class="w">  </span><span class="n">my_database</span><span class="w">  </span><span class="k">TO</span><span class="w">  </span><span class="n">jbarker</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w"> </span><span class="n">my_schema_readers</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">jbarker</span><span class="p">;</span><span class="w"></span>

<span class="k">CREATE</span><span class="w">  </span><span class="k">ROLE</span><span class="w">  </span><span class="n">lbream</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="n">LOGIN</span><span class="w">  </span><span class="k">TO</span><span class="w">  </span><span class="n">lbream</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="k">PASSWORD</span><span class="w">  </span><span class="s1">&#39;artichoke123&#39;</span><span class="w">  </span><span class="k">TO</span><span class="w"> </span><span class="n">lbream</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="n">CONNECT</span><span class="w">  </span><span class="k">ON</span><span class="w">  </span><span class="k">DATABASE</span><span class="w">  </span><span class="n">my_database</span><span class="w">  </span><span class="k">TO</span><span class="w">  </span><span class="n">lbream</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w"> </span><span class="n">my_schema_readers</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">lbream</span><span class="p">;</span><span class="w"></span>

<span class="k">CREATE</span><span class="w">  </span><span class="k">ROLE</span><span class="w">  </span><span class="n">pgregory</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="n">LOGIN</span><span class="w">  </span><span class="k">TO</span><span class="w">  </span><span class="n">pgregory</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="k">PASSWORD</span><span class="w">  </span><span class="s1">&#39;c1ca6a&#39;</span><span class="w">  </span><span class="k">TO</span><span class="w"> </span><span class="n">pgregory</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="n">CONNECT</span><span class="w">  </span><span class="k">ON</span><span class="w">  </span><span class="k">DATABASE</span><span class="w">  </span><span class="n">my_database</span><span class="w">  </span><span class="k">TO</span><span class="w">  </span><span class="n">pgregory</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w"> </span><span class="n">my_schema_readers</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">pgregory</span><span class="p">;</span><span class="w"></span>

<span class="c1">-- Create users in the security officers group</span>

<span class="k">CREATE</span><span class="w">  </span><span class="k">ROLE</span><span class="w">  </span><span class="n">hoover</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="n">LOGIN</span><span class="w">  </span><span class="k">TO</span><span class="w">  </span><span class="n">hoover</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="k">PASSWORD</span><span class="w">  </span><span class="s1">&#39;mintchip&#39;</span><span class="w">  </span><span class="k">TO</span><span class="w"> </span><span class="n">hoover</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w">  </span><span class="n">CONNECT</span><span class="w">  </span><span class="k">ON</span><span class="w">  </span><span class="k">DATABASE</span><span class="w">  </span><span class="n">my_database</span><span class="w">  </span><span class="k">TO</span><span class="w">  </span><span class="n">hoover</span><span class="p">;</span><span class="w"></span>
<span class="k">GRANT</span><span class="w"> </span><span class="n">my_schema_security_officers</span><span class="w"> </span><span class="k">TO</span><span class="w"> </span><span class="n">hoover</span><span class="p">;</span><span class="w"></span>
</pre></div>
</div>
<p>After this setup:</p>
<ul class="simple">
<li><p>Database designers will be able to run any ddl on objects in the schema and create new objects, including ones created by other database designers</p></li>
<li><p>Updaters will be able to insert and delete to existing and new tables</p></li>
<li><p>Readers will be able to read from existing and new tables</p></li>
</ul>
<p>All this will happen without having to run any more <code class="docutils literal notranslate"><span class="pre">GRANT</span></code> statements.</p>
<p>Any security officer will be able to add and remove users from these
groups. Creating and dropping login users themselves must be done by a
superuser.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="access_control_password_policy.html" class="btn btn-neutral float-left" title="Password Policy" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="audit_log_operation.html" class="btn btn-neutral float-right" title="Audit Log" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023 SQream.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>