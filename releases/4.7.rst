.. _4.7:

*****************
Release Notes 4.7
*****************

The 4.7 release notes were released on March XX, 2024

.. contents:: 
   :local:
   :depth: 1      

Compatibility Matrix
--------------------
 
+-------------------------+------------------------------------------------------------------------+
| System Requirement      | Details                                                                |
+=========================+========================================================================+
| Supported OS            | * CentOS - 7.x                                                         |
|                         | * RHEL - 7.x / 8.x                                                     |
+-------------------------+------------------------------------------------------------------------+
| supported Nvidia driver | CUDA version from 10.1 up to 11.4.3                                    |
+-------------------------+------------------------------------------------------------------------+
| Storage version         |   51                                                                   |
+-------------------------+------------------------------------------------------------------------+
| Driver compatibility    | * JDBC 5.2.0                                                           |
|                         | * ODBC 4.4.4                                                           | 
|                         | * NodeJS                                                               |
|                         | * .NET 3.0.2                                                           |
|                         | * Pysqream 5.0.0                                                       |
|                         | * Spark 5.0.0                                                          |
|                         | * SQLoader 7.12 (compatible with v4.6.1 or later)                      |
+-------------------------+------------------------------------------------------------------------+

New Features and Enhancements
-----------------------------



► Multi-platform CLI 

► You now have the option to choose the location for your ``metadata_server``, ``server_picker``, and Worker log files. In previous SQreamDB versions, the location of your log files was predetermined and hard-coded.

:ref:`metadata_server_cli_reference`

* Using the ``metadata_server_config.json`` file:

  .. code-block:: json 

	{
	"logPath": "<home/logs/my_logs>" 
	}
	
* Using the CLI:

  .. code-block:: console

	./metadata_server --log_path=<home/logs/my_logs>
	
:ref:`server_picker_cli_reference`

  Using the CLI:

  .. code-block:: console

	./server_picker --log_path=<home/logs/my_logs>

:ref:`Worker<current_method_modification_methods>`

  Using the ``sqream_config_legacy.json``:

  .. code-block:: json

	{
	"DefaultPathToLogs": "<home/logs/my_logs>"
	}





Known Issues
------------

* :ref:`Percentile<percentile_disc>` is not supported for :ref:`Window Functions<window_functions>`

Version 4.7 resolved Issues
---------------------------

+--------------------+---------------------------------------------------------------------------------------------------------------------+
| **SQ No.**         | **Description**                                                                                                     |
+====================+=====================================================================================================================+
| SQ-16038           | Fixed ``CREATE TABLE.. LIKE`` permission heritage issue                                                             |
+--------------------+---------------------------------------------------------------------------------------------------------------------+
| SQ-15690           | **Not fixed yet** - JDBC connector connectivity issue resulting in stuck queries                                    |
+--------------------+---------------------------------------------------------------------------------------------------------------------+


Deprecations
-------------------

► **Haskell CLI**

Starting October 2024, support for the Haskell CLI will be discontinued, and it will be replaced by a JAVA CLI that is compatible with both SQreamDB and BLUE.

► **CentOS Linux 7.x**

* As of June 2024, CentOS Linux 7.x will reach its End of Life and will not be supported by SQreamDB. This announcement provides a one-year advance notice for our users to plan for this change. We recommend users to explore migration or upgrade options to maintain ongoing support and security beyond this date. 

* REHL 8.x is now officially supported.

Upgrading to Version 4.7
-------------------------

1. Generate a back-up of the metadata by running the following command:

   .. code-block:: console

      select backup_metadata('out_path');
	  
   .. tip:: SQreamDB recommends storing the generated back-up locally in case needed.
   
   SQreamDB runs the Garbage Collector and creates a clean backup tarball package.
   
2. Shut down all SQreamDB services.

3. Copy the recently created back-up file.

4. Replace your current metadata with the metadata you stored in the back-up file.

5. Navigate to the new SQreamDB package bin folder.

6. Run the following command:

   .. code-block:: console

      ./upgrade_storage <levelDB path>
	
7. Version 4.4 introduces a service permission feature that enables superusers to grant and revoke role access to services. However, when upgrading from version 4.2 or earlier to version 4.4 or later, this feature initializes access to services, causing existing roles to lose their access to services. 

There are two methods of granting back access to services:

   * Grant access to all services for all roles using the :ref:`grant_usage_on_service_to_all_roles` utility function
   * Selectively grant or revoke access to services by following the :ref:`access permission guide<access_control_permissions>`


  .. note:: Upgrading from a major version to another major version requires you to follow the **Upgrade Storage** step. This is described in Step 7 of the `Upgrading SQreamDB Version <../installation_guides/installing_sqream_with_binary.html#upgrading-sqream-version>`_ procedure.
  
